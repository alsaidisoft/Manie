@using APP.Util;
@using SecurityClearanceWebApp.Controllers;
@using SecurityClearanceWebApp.Models;
@model SecurityClearanceWebApp.Models.RA42_PERMITS_DTL

@{
    RA42_SECURITY_CLEARANCEEntities db = new RA42_SECURITY_CLEARANCEEntities();

    ViewBag.Title = "Card";
    string align = "text-right";
    string alignInverse = "text-left";
    string dir = "ltr";
    if (ViewBag.lang == "ar")
    {
        align = "text-left";
        alignInverse = "text-right";
        dir = "rtl";
    }

    bool is_officer = false;
    if (Model.SERVICE_NUMBER != null)
    {
        if (Model.SERVICE_NUMBER.Contains("D1") || Model.SERVICE_NUMBER.Contains("D3") || Model.SERVICE_NUMBER.Contains("D2")
            || Model.SERVICE_NUMBER.Contains("D4") || Model.SERVICE_NUMBER.Contains("D14"))
        {
            is_officer = true;
        }
    }

    var col = 12;
    string barcode = Guid.NewGuid().ToString().Substring(0, 5);
    var agree = Resources.Common.ResourceManager.GetString("error_agree" + "_" + ViewBag.lang);
    var main_z = Resources.Passes.ResourceManager.GetString("main_zone" + "_" + ViewBag.lang);
    var sub_z = Resources.Passes.ResourceManager.GetString("sub_zone" + "_" + ViewBag.lang);
    var remove = Resources.Passes.ResourceManager.GetString("Remove" + "_" + ViewBag.lang);
    var all = Resources.Passes.ResourceManager.GetString("All" + "_" + ViewBag.lang);
    var choose_sub_z = Resources.Passes.ResourceManager.GetString("choose_sub_zone_again" + "_" + ViewBag.lang);
    var no_file_ = Resources.Passes.ResourceManager.GetString("not_allowed_m_ten" + "_" + ViewBag.lang);
    var no_zone_ = Resources.Passes.ResourceManager.GetString("not_allowed_m_50" + "_" + ViewBag.lang);
    var no_file_format = Resources.Passes.ResourceManager.GetString("file_format" + "_" + ViewBag.lang);
    var doc = Resources.Passes.ResourceManager.GetString("document_type" + "_" + ViewBag.lang);
    var choose_car_again = Resources.Passes.ResourceManager.GetString("Choose_car_again" + "_" + ViewBag.lang);
    var documents = Resources.Passes.ResourceManager.GetString("Documents" + "_" + ViewBag.lang);
    var expired = Resources.Common.ResourceManager.GetString("expired" + "_" + ViewBag.lang);
    var countinue = Resources.Common.ResourceManager.GetString("countinue" + "_" + ViewBag.lang);
    var identity = Resources.Passes.ResourceManager.GetString("Identity" + "_" + ViewBag.lang);
    var no_persons = Resources.Passes.ResourceManager.GetString("Not_allowed_50_person" + "_" + ViewBag.lang);
    var gender = Resources.Passes.ResourceManager.GetString("Gender" + "_" + ViewBag.lang);
    var civil_num = Resources.Passes.ResourceManager.GetString("Civil_number" + "_" + ViewBag.lang);
    var relative = Resources.Passes.ResourceManager.GetString("Relative_type" + "_" + ViewBag.lang);
    var returned = "-" + Resources.Passes.ResourceManager.GetString("returned" + "_" + ViewBag.lang);
    var choose_trans = Resources.Passes.ResourceManager.GetString("choose_transaction_type" + "_" + ViewBag.lang);
    var urlHttp = Resources.Common.ResourceManager.GetString("urlHttp" + "_" + ViewBag.lang);
    var app_name = Resources.Common.ResourceManager.GetString("app_name" + "_" + ViewBag.lang);
    var required = Resources.Common.ResourceManager.GetString("required" + "_" + ViewBag.lang);

    List<string> employees = new List<string> { "7","8","9","15","16","21","27",
    "35","36","37","42","43","44"};
    List<string> others = new List<string> { "17","18","19","20","22","26","28","31","32",
    "33","34","38","39","40","41"};
    List<string> Families = new List<string> { "50", "51", "30", "23" };
    List<string> RnoVistors = new List<string> { "11", "12", "13", "14", "16" };
    List<string> noZones = new List<string> { "1", "10","6" };
    List<string> companies = new List<string> { "29", "24", "25", "45" };
    int access = Model.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE.Value;
    string permit = Model.RA42_CARD_FOR_MST.CARD_SECRET_CODE;

    ViewData["access"] = access.ToString();




}

<div class="container-fluid" dir="@dir">
    <div class="row">
        @if (ViewBag.RESPO_STATE > 1)
        {

            @Html.Partial("Index")



        }

        <div class="col-md-12">
            <div class="page-path">
                <a href="@Url.Action("Edit", "Permitsdtl", new { id = Model.PERMIT_CODE, tab = @ViewBag.activetab })">
                    <i class="fa fa-edit"></i>
                    @Resources.Common.ResourceManager.GetString("edit" + "_" + ViewBag.lang)
                </a>
                <span>/</span>
                <a href="@Url.Action("Details", "Permitsdtl", new { id = Model.PERMIT_CODE, tab = @ViewBag.activetab })">
                    <i class="fa fa-eye"></i>
                    @Resources.Common.ResourceManager.GetString("details" + "_" + ViewBag.lang)
                </a>
                <span>/</span>
                <a href="@Url.Action("Delete", "Permitsdtl", new { id = Model.PERMIT_CODE, tab = @ViewBag.activetab })">
                    <i class="fa fa-trash"></i>
                    @Resources.Common.ResourceManager.GetString("delete" + "_" + ViewBag.lang)
                </a>
                <span>/</span>
                <a href="@Url.Action("Comments", "Permitsdtl", new { id = Model.PERMIT_CODE, tab = @ViewBag.activetab })">
                    <i class="fa fa-comment"></i>
                    @Resources.Passes.ResourceManager.GetString("Comments" + "_" + ViewBag.lang)
                </a>
                <span>/</span>
                <a>
                    <i class="fa fa-id-card-alt"></i>
                    @Resources.Passes.ResourceManager.GetString("crad_print" + "_" + ViewBag.lang)
                </a>
            </div>
            <div class="card shadow-sm">

                <div class="card-header text-primary">
                    <h5>
                        <i class="fa fa-id-card-alt"></i>
                        @Resources.Passes.ResourceManager.GetString("crad_print" + "_" + ViewBag.lang)
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-9 text-primary">
                            <h4>
                                <i class="@Model.RA42_ACCESS_TYPE_MST.ICON"></i>&nbsp;
                                @(Language.GetCurrentLang() == "en" ? Model.RA42_CARD_FOR_MST.CARD_FOR_E : Model.RA42_CARD_FOR_MST.CARD_FOR_A)
                            </h4>
                        </div>
                        <div class="col-md-3 @align">
                            <a href="#" onclick="history.back()" class="btn btn-outline-dark">
                                <i class="fa fa-backward"></i>
                                @Resources.Passes.ResourceManager.GetString("back" + "_" + ViewBag.lang)
                            </a>
                        </div>

                    </div>
                </div>
                <div class="card-body">


                    <div class="row">
                        <div class="col-md-6">

                            <div class="row">

                                <div class="col-md-12">
                                    <div class="form-group">

                                        @{
                                            var image1 = "";
                                            var kafeel = Resources.Passes.ResourceManager.GetString("Pass_owner" + "_" + ViewBag.lang);

                                            string image2 = "http://mamrafowebgov01/images/" + Model.SERVICE_NUMBER + ".gif";
                                            GeneralFunctions gn = new GeneralFunctions();
                                            bool download = gn.DownloadImage(image2, Model.SERVICE_NUMBER + ".gif");

                                            if (download == true)
                                            {
                                                image2 = "~/Files/Profiles/" + Model.SERVICE_NUMBER + ".gif";
                                            }

                                            if (Model.PERSONAL_IMAGE != null)
                                            {
                                                kafeel = Resources.Passes.ResourceManager.GetString("Pass_responsible" + "_" + ViewBag.lang);
                                                image1 = "~/Files/Profiles/" + Model.PERSONAL_IMAGE;
                                            }


                                        }
                                        <div class="card ">
                                            <div class="card-header">@Resources.Passes.ResourceManager.GetString("Personal_image" + "_" + ViewBag.lang)</div>
                                            <div class="row p-4">
                                                <div class="col-2 text-center bg-light p-2">
                                                    <div class="card-title text-center">@kafeel </div>
                                                    <img src="@Url.Content(image2)" onerror="this.onerror = null; this.src='@Url.Content("~/Content/images/adminpic.jpg")'" id="original" alt="ownere image" width="100" height="100">
                                                </div>
                                                @if (image1 != "")
                                                {
                                                    <span id="check" style="display: none;">@image1</span>
                                                    <div class="col-2 text-center bg-light p-2">
                                                        <div class="card-title text-center">@Resources.Passes.ResourceManager.GetString("Pass_owner" + "_" + ViewBag.lang)</div>
                                                        <img src="@Url.Content(image1)" onerror="this.onerror = null; this.src='@Url.Content("~/Content/images/adminpic.jpg")'" id="secondary" alt="second image" width="100" height="100">
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <br />
                                </div>
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            @Resources.Passes.ResourceManager.GetString("main_info" + "_" + ViewBag.lang)
                                        </div>

                                        <div class="row p-2">


                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Resources.Settings.ResourceManager.GetString("Force" + "_" + ViewBag.lang)
                                                    <p class="text-primary">
                                                        @(Language.GetCurrentLang() == "en" ? Model.RA42_STATIONS_MST.RA42_FORCES_MST.FORCE_NAME_E :
    Model.RA42_STATIONS_MST.RA42_FORCES_MST.FORCE_NAME_A)
                                                    </p>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("UNIT_CODE" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                        @(Language.GetCurrentLang() == "en" ? Model.RA42_STATIONS_MST.STATION_NAME_E :
    Model.RA42_STATIONS_MST.STATION_NAME_A)
                                                    </p>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("main_permits_type" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                        @(Language.GetCurrentLang() == "en" ? Model.RA42_ACCESS_TYPE_MST.ACCESS_TYPE_E :
    Model.RA42_ACCESS_TYPE_MST.ACCESS_TYPE)
                                                    </p>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Resources.Settings.ResourceManager.GetString("card_for" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                        @(Language.GetCurrentLang() == "en" ? Model.RA42_CARD_FOR_MST.CARD_FOR_E :
    Model.RA42_CARD_FOR_MST.CARD_FOR_A)
                                                    </p>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <br />
                                </div>

                                @if (access == 4)
                                {

                                    <div class="col-md-12">

                                        <div class="card">

                                            <div class="card-header">
                                                @Resources.Passes.ResourceManager.GetString("Host_details" + "_" + ViewBag.lang)
                                            </div>

                                            <div class="row p-2">


                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Name_a" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_NAME_A
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Name_e" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_NAME_E
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Rank_a" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_RANK_A
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Rank_e" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_RANK_E
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Proffision_a" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_PROFESSION_A
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Proffision_e" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.HOST_PROFESSION_E
                                                        </p>
                                                    </div>
                                                </div>



                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <br />
                                        <div class="card">
                                            <div class="card-header">
                                                @Resources.Passes.ResourceManager.GetString("Guest_details" + "_" + ViewBag.lang)
                                            </div>
                                            <div class="row p-2">


                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Civil_number" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.CIVIL_NUMBER
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Guest_name_inar" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.NAME_A
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Guest_name_inen" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                            @Model.NAME_E
                                                        </p>
                                                    </div>
                                                </div>

                                                @if (Model.IDENTITY_CODE != null)
                                                {
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            @Resources.Passes.ResourceManager.GetString("Identity" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                                @(Language.GetCurrentLang() == "en" ? Model.RA42_IDENTITY_MST.IDENTITY_TYPE_E :
Model.RA42_IDENTITY_MST.IDENTITY_TYPE_A)
                                                            </p>
                                                        </div>
                                                    </div>
                                                }
                                                @if (Model.GENDER_ID != null)
                                                {
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            @Resources.Passes.ResourceManager.GetString("Gender" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                                @(Language.GetCurrentLang() == "en" ? Model.RA42_GENDERS_MST.GENDER_E :
Model.RA42_GENDERS_MST.GENDER_A)
                                                            </p>
                                                        </div>
                                                    </div>
                                                }
                                                @if (Model.RELATIVE_TYPE_CODE != null)
                                                {

                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            @Resources.Passes.ResourceManager.GetString("Relative_type" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                                @(Language.GetCurrentLang() == "en" ? Model.RA42_RELATIVE_TYPE_MST.RELATIVE_TYPE_E :
Model.RA42_RELATIVE_TYPE_MST.RELATIVE_TYPE)
                                                            </p>
                                                        </div>
                                                    </div>
                                                }







                                            </div>
                                        </div>
                                    </div>

                                }
                                else
                                {
                                    if (Model.CIVIL_NUMBER == null)
                                    {
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("sympol" + "_" + ViewBag.lang)
                                                <p class="text-primary">@Model.SERVICE_NUMBER</p>
                                                <hr />
                                            </div>
                                        </div>
                                    }
                                    if (Model.CIVIL_NUMBER != null)
                                    {
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("Civil_number" + "_" + ViewBag.lang)
                                                <p class="text-primary">@Model.CIVIL_NUMBER</p>
                                                <hr />
                                            </div>
                                        </div>

                                    }



                                    if (employees.Contains(Model.RA42_CARD_FOR_MST.CARD_SECRET_CODE))
                                    {
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("rank" + "_" + ViewBag.lang)
                                                <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RANK_E : Model.RANK_A)</p>
                                                <hr />
                                            </div>
                                        </div>

                                    }


                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("Name" + "_" + ViewBag.lang)
                                            <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.NAME_E : Model.NAME_A)</p>
                                            <hr />
                                        </div>
                                    </div>




                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("proffession" + "_" + ViewBag.lang)
                                            <p class="text-primary" id="profession">@(Language.GetCurrentLang() == "en" ? Model.PROFESSION_E : Model.PROFESSION_A)</p>
                                            <hr />
                                        </div>
                                    </div>



                                    if (Model.BLOOD_CODE != null)
                                    {

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("blood_type" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                    @Model.RA42_BLOOD_TYPE_MST.BLOOD_TYPE
                                                </p>
                                                <hr />
                                            </div>
                                        </div>
                                    }

                                    if (Model.IDENTITY_CODE != null)
                                    {
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("Identity" + "_" + ViewBag.lang)
                                                <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_IDENTITY_MST.IDENTITY_TYPE_E : Model.RA42_IDENTITY_MST.IDENTITY_TYPE_A)</p>
                                                <hr />
                                            </div>
                                        </div>
                                    }
                                    if (Model.GENDER_ID != null)
                                    {
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("Gender" + "_" + ViewBag.lang)
                                                <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_GENDERS_MST.GENDER_E : Model.RA42_GENDERS_MST.GENDER_A)</p>
                                                <hr />
                                            </div>
                                        </div>
                                    }


                                }
                                <div class="col-md-4">
                                    <div class="form-group">
                                        @Resources.Passes.ResourceManager.GetString("unit" + "_" + ViewBag.lang)
                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.UNIT_E : Model.UNIT_A)</p>
                                        <hr />
                                    </div>
                                </div>
                                @if (Model.COMPANY_CODE != null)
                                {
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("company_name" + "_" + ViewBag.lang)
                                            <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_COMPANY_MST.COMPANY_NAME_E : Model.RA42_COMPANY_MST.COMPANY_NAME)</p>
                                            <hr />
                                        </div>
                                    </div>

                                }
                                @if (Model.EVENT_EXERCISE_CODE != null)
                                {
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("ev_or_ex" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                @(Language.GetCurrentLang() == "en" ? Model.RA42_EVENT_EXERCISE_MST.EVENT_EXERCISE_NAME_E :
Model.RA42_EVENT_EXERCISE_MST.EVENT_EXERCISE_NAME)
                                            </p>
                                            <hr />
                                        </div>
                                    </div>
                                }


                                @if (Model.JOINING_DATE != null)
                                {


                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("joining_date" + "_" + ViewBag.lang)                                                <p class="text-primary">
                                                @Model.JOINING_DATE
                                            </p>
                                            <hr />
                                        </div>
                                    </div>


                                }
                                @if (Model.PASS_TYPE_CODE != null)
                                {
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("Pass_type" + "_" + ViewBag.lang)
                                            <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_PASS_TYPE_MST.PASS_TYPE_E : Model.RA42_PASS_TYPE_MST.PASS_TYPE)</p>
                                            <hr />
                                        </div>
                                    </div>
                                }
                                @if (Model.BUILDING_NUMBER != null)
                                {
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("Building_num" + "_" + ViewBag.lang)
                                            <p class="text-primary"> @Model.BUILDING_NUMBER</p>
                                            <hr />
                                        </div>
                                    </div>
                                }
                                @if (Model.PHONE_NUMBER != null)
                                {
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("Phone_number" + "_" + ViewBag.lang)
                                            <p class="text-primary">@Model.PHONE_NUMBER</p>
                                            <hr />
                                        </div>
                                    </div>
                                }
                                @if (Model.GSM != null)
                                {
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("Gsm" + "_" + ViewBag.lang)

                                            <p class="text-primary">@Model.GSM</p>
                                            <hr />
                                        </div>
                                    </div>
                                }
                                @if (Model.NUMBER_OF_HOSTED != null)
                                {

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("number_of_hosted" + "_" + ViewBag.lang)
                                            <p class="text-primary"> @Model.NUMBER_OF_HOSTED</p>
                                            <hr />
                                        </div>
                                    </div>
                                }

                                @if (permit == "11" || permit == "14")
                                {


                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("visitor_employer" + "_" + ViewBag.lang)
                                            <p class="text-primary"> @Model.VISITOR_EMPLOYER</p>
                                            <hr />
                                        </div>
                                    </div>
                                }
                                @if (permit == "11")
                                {


                                    <div class="col-md-4">
                                        <div class="form-group">
                                            @Resources.Passes.ResourceManager.GetString("sn_host" + "_" + ViewBag.lang)
                                            <p class="text-primary"> @Model.SN_FOR_THE_GUARDIAN</p>
                                            <hr />
                                        </div>
                                    </div>
                                }

                                @if (Model.VECHILE_CODE != null)
                                {


                                    <div class="col-md-12">
                                        <br />
                                        <div class="card">
                                            <div class="card-header">
                                                @Resources.Passes.ResourceManager.GetString("car_details" + "_" + ViewBag.lang)
                                            </div>
                                            <div class="row p-2">


                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Vechile_cat" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_VECHILE_CATIGORY_MST.VECHILE_CAT_E : Model.RA42_VECHILE_CATIGORY_MST.VECHILE_CAT )</p>
                                                    </div>

                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Vechile_name" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_VECHILE_NAME_MST.VECHILE_NAME_E : Model.RA42_VECHILE_NAME_MST.VECHILE_NAME)</p>

                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Plate_type" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_PLATE_TYPE_MST.PLATE_TYPE_E : Model.RA42_PLATE_TYPE_MST.PLATE_TYPE)</p>

                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Plate_number" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@Model.PLATE_NUMBER</p>
                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Plate_char" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_PLATE_CHAR_MST.PLATE_CHAR_E : Model.RA42_PLATE_CHAR_MST.PLATE_CHAR)</p>

                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        @Resources.Passes.ResourceManager.GetString("Vechile_color" + "_" + ViewBag.lang)
                                                        <p class="text-primary">@(Language.GetCurrentLang() == "en" ? Model.RA42_VECHILE_COLOR_MST.COLOR_E : Model.RA42_VECHILE_COLOR_MST.COLOR)</p>

                                                    </div>
                                                </div>









                                            </div>
                                        </div>
                                        <br />
                                    </div>


                                }




                                <div class="col-md-12">
                                    <div class="form-group">
                                        @Resources.Passes.ResourceManager.GetString("PURPOSE_OF_PASS" + "_" + ViewBag.lang)
                                        <p class="text-primary">@Model.PURPOSE_OF_PASS</p>
                                        <hr />
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        @Resources.Passes.ResourceManager.GetString("Remarks" + "_" + ViewBag.lang)
                                        <p class="text-primary">@Model.REMARKS</p>
                                        <hr />
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            @Resources.Passes.ResourceManager.GetString("Car_property" + "_" + ViewBag.lang)
                                        </div>
                                        <div class="row p-2">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("Property_issued" + "_" + ViewBag.lang)
                                                    <p class="text-primary">
                                                        @if (Model.DATE_FROM != null)
                                                        {@Model.DATE_FROM.Value.ToString("dd/MM/yyyy")}
                                                    else { }
                                                    </p>

                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("Property_expired" + "_" + ViewBag.lang)

                                                    <p class="text-primary">
                                                        @if (Model.DATE_TO != null)
                                                        {@Model.DATE_TO.Value.ToString("dd/MM/yyyy")}
                                                    else { }
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12"><hr /></div>
                                <br />
                                <br />




                                <div class="col-lg-12">
                                    <h4 class="text-primary">
                                        @Resources.Passes.ResourceManager.GetString("Zones" + "_" + ViewBag.lang)
                                    </h4>
                                    @{
                                        string zones = "";
                                    }


                                    @{

                                        if (ViewBag.GetZones.Count > 0)
                                        {
                                            var last_item = ViewBag.GetZones[ViewBag.GetZones.Count - 1];



                                            foreach (var listZones in ViewBag.GetZones)
                                            {
                                                <div class="col-md-12">
                                                    <div class="alert alert-dark  mt-1 btn-block"><i class="fa fa-arrows-alt p-1"></i> @(Language.GetCurrentLang() == "en" ? listZones.RA42_ZONE_AREA_MST.ZONE_NAME_E : listZones.RA42_ZONE_AREA_MST.ZONE_NAME)</div>
                                                </div>
                                                if (listZones.RA42_ZONE_AREA_MST.ZONE_TYPE == "Z")
                                                {
                                                    if (Model.RA42_STATIONS_MST.FORCE_ID == 3 || Model.RA42_STATIONS_MST.FORCE_ID == 4)
                                                    {
                                                        zones += listZones.RA42_ZONE_AREA_MST.ZONE_NAME;

                                                        if (listZones != last_item)
                                                        {
                                                            zones += ", ";
                                                        }

                                                    }
                                                    else
                                                    {
                                                        zones += listZones.RA42_ZONE_AREA_MST.ZONE_TYPE.ToLower() + "" + listZones.RA42_ZONE_AREA_MST.ZONE_NUMBER;

                                                        if (listZones != last_item)
                                                        {
                                                            zones += ", ";
                                                        }
                                                    }

                                                }
                                                else
                                                {
                                                    if (Model.RA42_STATIONS_MST.FORCE_ID == 3 || Model.RA42_STATIONS_MST.FORCE_ID == 4)
                                                    {
                                                        zones += listZones.RA42_ZONE_AREA_MST.ZONE_NAME;

                                                        if (listZones != last_item)
                                                        {
                                                            zones += ", ";
                                                        }

                                                    }
                                                    else
                                                    {
                                                        zones += listZones.RA42_ZONE_AREA_MST.ZONE_TYPE.ToLower() + "" + listZones.RA42_ZONE_AREA_MST.ZONE_NUMBER;

                                                        if (listZones != last_item)
                                                        {
                                                            zones += ", ";
                                                        }
                                                    }

                                                }
                                            }
                                        }
                                    }




                                    <span id="zones" style="display: none;">@zones</span>
                                </div>

                                <div class="col-lg-12">
                                    <h4 class="text-primary">
                                        @Resources.Passes.ResourceManager.GetString("Documents" + "_" + ViewBag.lang)
                                    </h4>
                                    @foreach (var listFiles in ViewBag.GetFiles)
                                    {
                                        if (listFiles.FILE_TYPE != null)
                                        {
                                            if (!string.IsNullOrWhiteSpace(listFiles.FILE_TYPE_TEXT))
                                            {
                                                bool check = DateTime.TryParse(listFiles.FILE_TYPE_TEXT, out DateTime dateTime);
                                                if (check == true)
                                                {
                                                    var exp = countinue;
                                                    var div = "alert-success";
                                                    DateTime d = Convert.ToDateTime(listFiles.FILE_TYPE_TEXT);
                                                    if (d < DateTime.Now)
                                                    {
                                                        exp = expired;
                                                        div = "alert-danger";
                                                    }
                                                    <div class="col-md-12">
                                                        <div class="alert alert-dark mt-1 btn-block">
                                                            <i class="fa fa-file-pdf p-1"></i> @(Language.GetCurrentLang() == "en" ? @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE_E : @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE) <span class="@div p-1 rounded">@exp | @listFiles.FILE_TYPE_TEXT </span> <a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-warning btn-sm mr-1" target="_blank"><i class="fa fa-external-link-alt"></i></a><a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-primary details btn-sm mr-1" download><i class="fa fa-download"></i></a>

                                                        </div>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div class="col-md-12">
                                                        <div class="alert alert-dark mt-1 btn-block">
                                                            <i class="fa fa-file-pdf p-1"></i> @(Language.GetCurrentLang() == "en" ? @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE_E : @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE) | <span style="color: #007bff !important;">@listFiles.FILE_TYPE_TEXT</span> <a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-warning btn-sm mr-1" target="_blank"><i class="fa fa-external-link-alt"></i></a><a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-primary details btn-sm mr-1" download><i class="fa fa-download"></i></a>

                                                        </div>
                                                    </div>
                                                }
                                            }
                                            else
                                            {
                                                <div class="col-md-12">
                                                    <div class="alert alert-dark mt-1 btn-block">
                                                        <i class="fa fa-file-pdf p-1"></i> @(Language.GetCurrentLang() == "en" ? @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE_E : @listFiles.RA42_FILE_TYPE_MST.FILE_TYPE) <a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-warning btn-sm mr-1" target="_blank"><i class="fa fa-external-link-alt"></i></a><a href="~/Files/Documents/@listFiles.FILE_NAME" class="float-left btn-primary details btn-sm mr-1" download><i class="fa fa-download"></i></a>

                                                    </div>
                                                </div>
                                            }
                                        }
                                    }


                                </div>

                                <div class="col-lg-12">

                                    @{
                                        int rr = 1;
                                    }
                                    @foreach (var listrelatives in ViewBag.GetRelativs)
                                    {
                                        if (rr == 1)
                                        {
                                            <h4 class="text-primary">
                                                @Resources.Passes.ResourceManager.GetString("Relativs" + "_" + ViewBag.lang)
                                            </h4>
                                        }
                                        <div class="col-md-12">
                                            <div class="alert alert-dark mt-1 btn-block">
                                                <i class="fa fa-user p-1"></i>@listrelatives.FULL_NAME  @if (!string.IsNullOrWhiteSpace(listrelatives.PERSONAL_IMAGE))
                                                {<img src="@Url.Content("~/Files/Profiles/" + @listrelatives.PERSONAL_IMAGE)" width="50" height="50" />} - @listrelatives.REMARKS
                                                <a href="#" class="float-left btn-info btn-sm mr-1" onclick="RelativeData(@listrelatives.MEMBER_CODE)"><i class="fa fa-info-circle"></i></a>
                                                @if (listrelatives.ISPRINTED != true)
                                                {
                                                    <a href="@Url.Action("PrintMember", ViewBag.controllerName, new { id = @listrelatives.MEMBER_CODE })" target="_blank" class="float-left btn-dark btn-sm mr-1" onclick="return confirm('هل أنت متأكد من رغبتك في طباعة أحد أفراد الأسرة؟')"><i class="fa fa-print"></i> @Resources.Passes.ResourceManager.GetString("crad_print" + "_" + ViewBag.lang)</a>
                                                }
                                                else
                                                {
                                                    <span class="text-dark">
                                                        @Resources.Passes.ResourceManager.GetString("new_trans" + "_" + ViewBag.lang)
                                                    </span>
                                                }
                                            </div>
                                        </div>

                                        { rr = rr + 1; }


                                    }
                                </div>
                                <span style="display:none" id="mmrr">@rr</span>
                                <table class="table border" id="members_" style="display:none">
                                    <thead>
                                        <tr><th colspan="3">بيانات المصرح لهم بالدخول</th></tr>
                                        <tr>

                                            <th>الرقم</th>
                                            <th>صلة القرابة</th>
                                            <th>الاسم</th>
                                            <th>ت</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int r = 1;
                                        }
                                        @foreach (var rrr in ViewBag.GetRelativs)
                                        {
                                            <tr>
                                                <td>@rrr.CIVIL_NUMBER</td>
                                                <td>@rrr.RA42_RELATIVE_TYPE_MST.RELATIVE_TYPE</td>
                                                <td>@rrr.FULL_NAME</td>
                                                <td>@r</td>
                                            </tr>
                                            { r = r + 1; }
                                        }
                                    </tbody>
                                </table>



                                <div class="col-12"><hr /></div>
                                <div class="col-md-12">
                                    @Resources.Passes.ResourceManager.GetString("Barcode" + "_" + ViewBag.lang)
                                    @if (Model.BARCODE != null)
                                    {

                                        <img data-imageid="barcode-id-@Model.PERMIT_CODE" id="barcode-id-@Model.PERMIT_CODE" data-barcode="@Model.BARCODE" class="barcode-image" />
                                    }
                                </div>
                                <div class="col-md-12">
                                    <hr />
                                    @Resources.Settings.ResourceManager.GetString("autho_signature" + "_" + ViewBag.lang)

                                    @if (access != 1 && access != 6)
                                    {

                                        var signature = db.RA42_AUTHORAIZATION_SIGNAURE_MST.Where(a => a.RA42_STATIONS_MST.STATION_CODE == Model.STATION_CODE && a.DLT_STS != true).OrderByDescending(a => a.AUTHO_SIGNATURE_CODE).FirstOrDefault();
                                        var sign = "";
                                        if (signature != null)
                                        {
                                            sign = /*@urlHttp + @app_name +*/ "/Files/Signatures/" + signature.SIGNATURE;
                                        }
                                        <p><img src="@sign" style="display: none;" id="signature" /></p>
                                        <img src="@sign" />

                                    }
                                    else
                                    {
                                        var signature = db.RA42_MANAGER_SIGNATURE_MST.Where(a => a.DLT_STS != true && a.FORCE_ID == Model.RA42_STATIONS_MST.FORCE_ID).OrderByDescending(a => a.MANAGER_SIGN_CODE).FirstOrDefault();
                                        var sign = "";
                                        if (signature != null)
                                        {
                                            sign = /*@urlHttp + @app_name +*/ "/Files/Signatures/" + signature.SIGNATURE;
                                        }
                                        <p><img src="@sign" style="display: none;" id="signature" /></p>
                                        <img src="@sign" />
                                    }
                                </div>
                                <div class="col-12"><hr /></div>

                                @{

                                    var card_for = db.RA42_CARD_DESIGN_DTL.Where(a => a.RA42_CARD_FOR_MST.CARD_SECRET_CODE == Model.RA42_CARD_FOR_MST.CARD_SECRET_CODE && a.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE ==
                                    Model.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE && a.DLT_STS != true && a.RA42_FORCES_MST.FORCE_ID == Model.RA42_STATIONS_MST.FORCE_ID).FirstOrDefault();
                                    if (card_for != null)
                                    {
                                        <p id="front" style="display:none;">@card_for.BASE64_ENCODE_FRONT</p>
                                        <p id="back" style="display:none;">@card_for.BASE64_ENCODE_BACK</p>
                                        <p id="form_layout" style="display:none;">@card_for.BASE64_ENCODE_TEMP</p>
                                        <p id="permit_secret_code" style="display:none;">@card_for.RA42_CARD_FOR_MST.CARD_SECRET_CODE</p>
                                        <p id="access_type_a" style="display: none;"> @Model.RA42_CARD_FOR_MST.CARD_FOR_A</p>
                                        <p id="access_type_e" style="display: none;">@Model.RA42_CARD_FOR_MST.CARD_FOR_E</p>
                                    }
                                    else
                                    {
                                        <div class="col-md-12">
                                            <div class="alert alert-warning">
                                                <i class="fa fa-exclamation-triangle"></i>
                                                @Resources.Common.ResourceManager.GetString("no_design" + "_" + ViewBag.lang)
                                            </div>
                                        </div>
                                    }

                                    var force = Model.RA42_STATIONS_MST.RA42_FORCES_MST.LOGO;
                                    var force_id = Model.RA42_STATIONS_MST.FORCE_ID;
                                    var phone = Model.RA42_STATIONS_MST.PHONE_NUMBER;
                                    var force_name_a = Model.RA42_STATIONS_MST.RA42_FORCES_MST.FORCE_NAME_A;
                                    var force_name_e = Model.RA42_STATIONS_MST.RA42_FORCES_MST.FORCE_NAME_E;
                                    var directorate_a = Model.RA42_STATIONS_MST.RA42_FORCES_MST.DIRECTORATE_A;
                                    var directorate_e = Model.RA42_STATIONS_MST.RA42_FORCES_MST.DIRECTORATE_E;
                                    var access_type_a = Model.RA42_CARD_FOR_MST.CARD_FOR_A;
                                    var access_type_e = Model.RA42_CARD_FOR_MST.CARD_FOR_E;



                                    <p id="access" style="display:none;"> @Model.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE </p>
                                    <p id="force_id" style="display:none;">@force_id</p>
                                    <p id="force_logo" style="display: none;">@force</p>
                                    <p id="force_a" style="display: none;">@force_name_a</p>
                                    <p id="force_e" style="display: none;">@force_name_e</p>
                                    <p id="directorate_a" style="display: none;">@directorate_a</p>
                                    <p id="directorate_e" style="display: none;">@directorate_e</p>
                                    <p id="phone_num" style="display: none;">@phone</p>
                                    <p id="PERMIT_CODE" style="display: none;">@Model.PERMIT_CODE</p>
                                    <p id="unit" style="display:none;">@Model.UNIT_A</p>
                                    <p id="proffession" style="display:none;">@Model.PROFESSION_A</p>
                                    <p id="proffessionE" style="display:none;">@Model.PROFESSION_E</p>
                                    <p id="station" style="display:none;"> @Model.RA42_STATIONS_MST.STATION_NAME_A </p>
                                    <p id="host_name" style="display:none;">@Model.HOST_RANK_A-@Model.HOST_NAME_A</p>
                                    <p id="name" style="display:none;"> @Model.NAME_A </p>
                                    <p id="nameE" style="display:none;"> @Model.NAME_E </p>
                                    <p id="civil_number" style="display:none;">@Model.CIVIL_NUMBER</p>
                                    <p id="rank" style="display:none;">@Model.RANK_A</p>
                                    <p id="service_number" style="display:none;">@Model.SERVICE_NUMBER</p>
                                    <p style="display:none;" id="building">@Model.BUILDING_NUMBER</p>
                                    <p style="display:none;" id="num_hosted"> @Model.NUMBER_OF_HOSTED</p>
                                    <p style="display:none;" id="num_building">@Model.BUILDING_NUMBER</p>
                                    if (Model.VECHILE_CODE != null)
                                    {
                                        <p id="char" style="display:none;">@Model.RA42_PLATE_CHAR_MST.PLATE_CHAR</p>
                                        <p id="vechilnum" style="display: none"> @Model.PLATE_NUMBER </p>
                                        <p id="color" style="display: none">@Model.RA42_VECHILE_COLOR_MST.COLOR</p>
                                        <p id="type" style="display: none">@Model.RA42_VECHILE_CATIGORY_MST.VECHILE_CAT - @Model.RA42_VECHILE_NAME_MST.VECHILE_NAME</p>
                                        <p id="plate_type" style="display: none">@Model.RA42_PLATE_TYPE_MST.PLATE_TYPE</p>
                                        <p id="with_car" style="display: none">yes</p>
                                    }
                                    <p id="puprpose" style="display:none;">@Model.PURPOSE_OF_PASS</p>
                                    <p id="frdate" style="display:none;">
                                        @if (Model.DATE_FROM != null)
                                        {@Model.DATE_FROM.Value.ToString("dd/MM/yyyy")}
                                    else { }
                                    </p>
                                    <p style="display:none;" id="date">
                                        @if (Model.DATE_TO != null)
                                        {@Model.DATE_TO.Value.ToString("dd/MM/yyyy")}
                                    else { }
                                    <p style="display:none;" id="joining_date">
                                        @if (Model.JOINING_DATE != null)
                                        {@Model.JOINING_DATE.Value.ToShortDateString()}
                                    </p>

                                    </p>
                                    if (Model.COMPANY_CODE != null)
                                    {
                                        <p style="display:none;" id="company">@Model.RA42_COMPANY_MST.COMPANY_NAME</p>

                                    }
                                    if (Model.EVENT_EXERCISE_CODE != null)
                                    {
                                        <p style="display:none;" id="excercise">@Model.RA42_EVENT_EXERCISE_MST.EVENT_EXERCISE_NAME</p>

                                    }
                                    if (Model.IDENTITY_CODE != null)
                                    {
                                        <p style="display:none" id="identity">@Model.RA42_IDENTITY_MST.IDENTITY_TYPE_A</p>
                                    }
                                    if (Model.BLOOD_CODE != null)
                                    {
                                        <p style="display:none" id="blood_type">@Model.RA42_BLOOD_TYPE_MST.BLOOD_TYPE</p>
                                    }




                                }


                            </div>
                        </div>

                        @{
                            var checkPayment = db.RA42_TRANSACTION_DTL.Where(a => a.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE == Model.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE && a.ACCESS_ROW_CODE
                            == Model.PERMIT_CODE && a.DLT_STS != true && a.CRD_DT > new DateTime(2024, 10, 10)).ToList();

                            if (checkPayment.Count > 0)
                            {
                                var checkPrinted = db.RA42_PRINT_MST.Where(a => a.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE == Model.RA42_ACCESS_TYPE_MST.ACCESS_SECRET_CODE &&
                                a.PASS_ROW_CODE == Model.PERMIT_CODE && a.DLT_STS != true && a.PRINT_DT > new DateTime(2024, 10, 10)).ToList();
                                if (checkPrinted.Count == 0)
                                {
                                    <div class="col-md-6">
                                        <div class="col-md-12">
                                            @if (TempData["Success"] != null)
                                            {
                                                <div class="alert alert-success"><i class="fa fa-check"></i> @TempData["Success"]</div>
                                            }
                                            @if (TempData["Erorr"] != null)
                                            {
                                                <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> @TempData["Erorr"]</div>
                                            }
                                            <div class="row">
                                                @if (ViewBag.checkViolations == true)
                                                {
                                                    <div class="col-md-12">
                                                        <div class="alert alert-danger">
                                                            <i class="fa fa-exclamation-triangle"></i> @Resources.Passes.ResourceManager.GetString("prevented_by_violation" + "_" + ViewBag.lang)

                                                        </div>
                                                    </div>
                                                }
                                                else
                                                {

                                                    <div class="col-md-12">
                                                        <div class="btn-group m-1 @align">
                                                            @if (Model.DATE_TO >= DateTime.Today)
                                                            {
                                                                <a href="javascript:PrintCard()" class="btn btn-dark">
                                                                    <i class="fa fa-id-card-alt"></i> &nbsp;
                                                                    @Resources.Passes.ResourceManager.GetString("crad_print" + "_" + ViewBag.lang)
                                                                </a>


                                                                <a href="javascript:PrintTempForm()" class="btn btn-primary details">
                                                                    <i class="fa fa-print"></i> &nbsp;
                                                                    @Resources.Common.ResourceManager.GetString("print_form" + "_" + ViewBag.lang)
                                                                </a>
                                                                <a class="btn btn-warning text-center" title="@Resources.Common.ResourceManager.GetString("edit" + "_" + ViewBag.lang)" href="@Url.Action("Edit", ViewBag.controllerName, new { id = Model.PERMIT_CODE,tab=@ViewBag.activetab })">
                                                                    <i class="fa fa-edit"></i> &nbsp;
                                                                    @Resources.Common.ResourceManager.GetString("edit" + "_" + ViewBag.lang)
                                                                </a>
                                                            }
                                                            else
                                                            {

                                                                <div class="alert alert-warning">
                                                                    <a class="btn btn-warning text-center" title="@Resources.Common.ResourceManager.GetString("edit" + "_" + ViewBag.lang)" href="@Url.Action("Edit", ViewBag.controllerName, new { id = Model.PERMIT_CODE,tab=ViewBag.activetab })">
                                                                        <i class="fa fa-edit"></i> &nbsp;
                                                                        @Resources.Common.ResourceManager.GetString("edit" + "_" + ViewBag.lang)
                                                                    </a>  @Resources.Passes.ResourceManager.GetString("expired_permit" + "_" + ViewBag.lang)
                                                                    <i class="fa fa-exclamation-triangle"></i>
                                                                </div>




                                                            }
                                                        </div>
                                                    </div>
                                                }
                                                <div class="col-md-12 p-2"></div>
                                                <div class="col-md-12">

                                                    <iframe id="frame" frameborder="0" height="500" type="application/pdf" style="display: none; width: 100%;"></iframe>


                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                }
                                else
                                {

                                    <div class="col-6">
                                        @if (checkPrinted.Any())
                                        {
                                        <div class="alert alert-warning">
                                            <i class="fa fa-exclamation-triangle"></i> @Resources.Passes.ResourceManager.GetString("this_permit_printed" + "_" + ViewBag.lang)
                                            <br /> - @Resources.Common.ResourceManager.GetString("printed_by" + "_" + ViewBag.lang) @(@checkPrinted != null ? Model.getFullName(@checkPrinted.LastOrDefault().PRINT_BY) : "-"))
                                            <br /> - @Resources.Common.ResourceManager.GetString("printed_date" + "_" + ViewBag.lang) @checkPrinted.LastOrDefault().PRINT_DT
                                            <br /> - @Resources.Common.ResourceManager.GetString("print_type" + "_" + ViewBag.lang) @checkPrinted.LastOrDefault().PRINT_TYPE
                                            <br /> - @Resources.Passes.ResourceManager.GetString("transaction_type" + "_" + ViewBag.lang) @checkPayment.LastOrDefault().RA42_TRANSACTION_TYPE_MST.TRANSACTION_NAME_A
                                            <br /> - @checkPayment.LastOrDefault().REMARKS
                                            <br />  <a class="btn btn-link" title="@Resources.Common.ResourceManager.GetString("prevuies_transactions" + "_" + ViewBag.lang)" target="_blank" href="@Url.Action("Transactions", "Mypasses", new { id = Model.PERMIT_CODE + "-" + Model.ACCESS_TYPE_CODE })">
                                                <i class="fa fa-money-bill"></i> &nbsp;
                                                @Resources.Common.ResourceManager.GetString("prevuies_transactions" + "_" + ViewBag.lang)
                                            </a>
                                        </div>
                                        }
                                        <h4><i class="fa fa-file-invoice-dollar"></i> @Resources.Passes.ResourceManager.GetString("trans_type" + "_" + ViewBag.lang)</h4>




                                        <hr />

                                        @using (Html.BeginForm("Card", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
                                        {
                                            @Html.AntiForgeryToken()

                                    <div class="row bg-light rounded p-2">
                                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                        @Html.HiddenFor(model => model.PERMIT_CODE)


                                        <input type="hidden" name="CheckPrinted" value="Printed" />
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("trans_type" + "_" + ViewBag.lang)
                                                <select name="TRANSACTION_TYPE_CODE" class="form-control" onchange="SelectedMethod(this);" required="" oninvalid="this.setCustomValidity(' @required')" oninput="setCustomValidity('')">
                                                    <option value="">@choose_trans</option>
                                                    @if (ViewBag.TRANSACTION_TYPE_CODE != null)
                                                    {
                                                        foreach (var item in ViewBag.TRANSACTION_TYPE_CODE)
                                                        {
                                                            <option value="@item.Value">@item.Text</option>
                                                        }
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6" id="receDiv">

                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("Receipt" + "_" + ViewBag.lang)
                                                <input type="file" name="RECEIPT" id="RECEIPT" class="form-control" />
                                            </div>



                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                @Resources.Passes.ResourceManager.GetString("Remarks" + "_" + ViewBag.lang)
                                                <textarea name="TRANSACTION_REMARKS" class="form-control"></textarea>
                                            </div>
                                        </div>

                                        <input type="hidden" name="id" value="@Model.PERMIT_CODE" />
                                        <input type="hidden" name="tab" value="@ViewBag.activetab" />
                                        <div class="col-md-12">
                                            <div class="form-group @align">
                                                <button type="submit" value="Create" class="btn btn-success">
                                                    <i class="fa fa-save"></i> &nbsp;
                                                    @Resources.Common.ResourceManager.GetString("save" + "_" + ViewBag.lang)
                                                </button>
                                            </div>
                                        </div>

                                    </div>


                                        }
                                    </div>
                                }
                            }
                            else
                            {
                                <div class="col-6">

                                    <h4><i class="fa fa-file-invoice-dollar"></i> @Resources.Passes.ResourceManager.GetString("trans_type" + "_" + ViewBag.lang)</h4>




                                    <hr />

                                    @using (Html.BeginForm("Card", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {
                                        @Html.AntiForgeryToken()

                                        <div class="row bg-light rounded p-2">
                                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                            @Html.HiddenFor(model => model.PERMIT_CODE)


                                            <input type="hidden" name="CheckPrinted" value="NotPrinted" />

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("trans_type" + "_" + ViewBag.lang)
                                                    <select name="TRANSACTION_TYPE_CODE" class="form-control" onchange="SelectedMethod(this);" required="" oninvalid="this.setCustomValidity(' @required')" oninput="setCustomValidity('')">
                                                        <option value="">@choose_trans</option>
                                                        @if (ViewBag.TRANSACTION_TYPE_CODE != null)
                                                        {
                                                            foreach (var item in ViewBag.TRANSACTION_TYPE_CODE)
                                                            {
                                                                <option value="@item.Value">@item.Text</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6" id="receDiv">

                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("Receipt" + "_" + ViewBag.lang)
                                                    <input type="file" name="RECEIPT" id="RECEIPT" class="form-control" />
                                                </div>


                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    @Resources.Passes.ResourceManager.GetString("Remarks" + "_" + ViewBag.lang)
                                                    <textarea name="TRANSACTION_REMARKS" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <input type="hidden" name="id" value="@Model.PERMIT_CODE" />
                                            <input type="hidden" name="tab" value="@ViewBag.activetab" />

                                            <div class="col-md-12">
                                                <div class="form-group @align">
                                                    <button type="submit" value="Create" class="btn btn-success">
                                                        <i class="fa fa-save"></i> &nbsp;
                                                        @Resources.Common.ResourceManager.GetString("save" + "_" + ViewBag.lang)
                                                    </button>
                                                </div>
                                            </div>

                                        </div>


                                    }
                                </div>
                            }

                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="modal fade" id="Relative" dir="@dir">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-header">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-11">
                            <h4 id="ModalTitle_details"></h4>
                        </div>
                        <div class="col-md-1">
                            <a href="#" class="btn btn-secondary btn-sm" data-dismiss="modal"><i class="fa fa-window-close"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-body">





                <div class="row">
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Passes.ResourceManager.GetString("Name_a" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="NAME"></h6>
                        <hr />
                    </div>
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Passes.ResourceManager.GetString("Relative_type" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="TYPE"></h6>
                        <hr />
                    </div>
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Passes.ResourceManager.GetString("Gender" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="GEN"></h6>
                        <hr />
                    </div>
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Passes.ResourceManager.GetString("Civil_number" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="CIVIL_ID"></h6>
                        <hr />
                    </div>
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Passes.ResourceManager.GetString("Identity" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="IDEN"></h6>
                        <hr />
                    </div>
                    <div class="col-md-6">
                        <h6 class="details-info-title">@Resources.Common.ResourceManager.GetString("REMARKS" + "_" + ViewBag.lang)</h6>
                        <h6 class="details-info-content text-primary" id="REM"></h6>
                        <hr />
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>



@section scripts{



    <script type="text/javascript" src="~/Scripts/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="~/Scripts/bootstrap.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-ui.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jspdf.debug.js"></script>
    <script type="text/javascript" src="~/Scripts/basic.js"></script>
    <script type="text/javascript" src="~/Scripts/fonts.js"></script>
    <script type="text/javascript" src="~/Scripts/default_vfs.js"></script>
    <script type="text/javascript" src="~/Scripts/autotable/jspdf.min.js"></script>
    <script type="text/javascript" src="~/Scripts/autotable/jspdf.plugin.autotable.min.js"></script>
    <script>

         function SelectedMethod(sel) {
            var check = sel.options[sel.selectedIndex].text;

            var amount = check.replace(/[^0-9]/g, '');
            if (amount > 0) {
                $("#receDiv").show();
            }
            else {
                $("#receDiv").hide();
            }

        }

        var pf;
        var br;
        var si;
        var sec;
        $(document).ready(function () {

            $("#receDiv").hide();

            var signature = document.getElementById("signature").src;
            var profile = document.getElementById("original").src;
            //var security_logo = document.getElementById("security_logo").src;
            //var barcode = document.getElementsByClassName("barcode-image").src;
            var check = $("#check").text();




            if (check != "") {
                var secondary = document.getElementById("secondary").src;
                toDataURL(secondary, function (dataUrl) {
                    console.log('PROFILE:', dataUrl)
                });
            }
            else {
                toDataURL(profile, function (dataUrl) {
                    console.log('PROFILE:', dataUrl)
                });
            }


            toDataURL2(signature, function (dataUrl) {
                console.log('signature:', dataUrl)
            });



        });

         //Show The Popup Modal For DeleteComfirmation
         function RelativeData(Id) {
             /*$("#MEMBER_CODE").val(Id);*/
             console.log(Id);
             var url = "./GetObjectById?Id=" + Id;
             console.log(Id);
             $("#ModalTitle_details").html("<i class='fa fa-eye'></i> @Resources.Common.ResourceManager.GetString("details" + "_" + ViewBag.lang)");
             $("#Relative").modal();
             $.ajax({
                 type: "GET",
                 url: url,
                 success: function (data) {
                     //var obj = JSON.parse(data);
                     var obj = JSON.parse(JSON.stringify(data));
                     var name = obj.FULL_NAME != null ? obj.FULL_NAME : "";
                     var type = obj.RELATIVE_TYPE != null ? obj.RELATIVE_TYPE : "";
                     var identity = obj.IDENTITY != null ? obj.IDENTITY : "";
                     var gen = obj.GENDER != null ? obj.GENDER : "";
                     var civil = obj.CIVIL_NUMBER != null ? obj.CIVIL_NUMBER : "";
                     var remarks = obj.REMARKS != null ? obj.REMARKS : "";
                     $("#NAME").text(name);
                     $("#TYPE").text(type);
                     $("#IDEN").text(identity);
                     $("#GEN").text(gen);
                     $("#CIVIL_ID").text(civil);
                     $("#REM").text(remarks);


                 }
             })

         }
        function toDataURL(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.onload = function () {
                var reader = new FileReader();
                reader.onloadend = function () {
                    callback(reader.result);
                    pf = reader.result;
                    //sessionStorage.setItem("base64", reader.result);


                }
                reader.readAsDataURL(xhr.response);
            };
            xhr.open('GET', url);

            xhr.responseType = 'blob';
            xhr.send();
        }



        function toDataURL2(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.onload = function () {
                var reader = new FileReader();
                reader.onloadend = function () {
                    callback(reader.result);
                    si = reader.result;

                    //sessionStorage.setItem("barcode64", reader.result);


                }
                reader.readAsDataURL(xhr.response);
            };
            xhr.open('GET', url);

            xhr.responseType = 'blob';
            xhr.send();
        }



        function Print(type) {
            var id = $("#PERMIT_CODE").text();
            console.log(id);


                $.ajax({
                    type: "POST",
                    url: '@Url.Action("PrintById")',
                    data: { id: id, type: type },
                    dataType: "json",
                    success: function () {
                        console.log(type);
                    },
                    error: function () {
                        console.log("somthing wrong while printed");
                    }
                });

        }


        function PrintCard() {
            var model1 = '@Html.Raw(Json.Encode(employees))';
            var model2 = '@Html.Raw(Json.Encode(others))';
            var model3 = '@Html.Raw(Json.Encode(Families))';
            var model4 = '@Html.Raw(Json.Encode(companies))';
            var employees_list = JSON.parse(model1);
            var others_list = JSON.parse(model2);
            var families_list = JSON.parse(model3);
            var companies_list = JSON.parse(model4);
            var access = $("#access").text();

            Print("Card");
            var doc = new jsPDF('l', 'mm', [242, 153]);

            doc.addFileToVFS("Amiri-Regular.ttf", AmiriRegular);
            doc.addFont('Amiri-Regular.ttf', 'Amiri', 'normal');

            doc.addFileToVFS("Arialbd.ttf", Arial);
            doc.addFont('Arialbd.ttf', 'arialbd', 'normal');

            var width = doc.internal.pageSize.getWidth();
            var height = doc.internal.pageSize.getHeight();
            var imgdata;
            var imgdata2;
            imgdata = $("#front").text();
            imgdata2 = $("#back").text();
            var logo;
            if (access == 10) {
                doc = new jsPDF('P', 'mm', [242, 153]);
            } else {
                doc.addImage(imgdata, 'JPEG', 0, 0, 85.6, 54);
                doc.setFontSize(6.5);
                logo = $("#force_logo").text();
                if (access != 1 && access !=6) {
                    doc.addImage(logo, 'png', width / 2.2, 1, 8, 8);
                }
            }
            var force_id = $("#force_id").text();
            var force_a = $("#force_a").text();
            var force_e = $("#force_e").text();
            var direc_a = $("#directorate_a").text();
            var direc_e = $("#directorate_e").text();
            var access_a = $("#access_type_a").text();
            var access_e = $("#access_type_e").text();
            var permit = $("#permit_secret_code").text();
            var name = $("#name").text();
            var rank = $("#rank").text();
            var company = $("#company").text();
            var identity = $("#identity").text();
            var station = $("#station").text();
            var service_number = $("#service_number").text();
            var civil_number = $("#civil_number").text();
            var proffession = $("#proffession").text();
            var respo = $("#host_name").text();
            var with_car = $("#with_car").text();
            var vechilnum = $("#vechilnum").text();
            var char = $("#char").text();
            var type = $("#type").text();
            var plate_type = $("#plate_type").text();
            var color = $("#color").text();
            var date = $("#date").text();
            var zones = $("#zones").text();
            var unit = $("#unit").text();
            var phone = $("#phone_num").text();
            var puprpose = $("#puprpose").text();
            var num_hosted = $("#num_hosted").text();
            var num_building = $("#num_building").text();
            var frdate = $("#frdate").text();
            if (access != 10 && access != 1 && access !=6) {
                doc.setFont('Amiri'); // set font Amiri
                doc.setFontSize(6.5);
                doc.text(force_a, 81, 3, { align: 'right', lang: 'ar' });
                doc.text(direc_a, 81, 6, { align: 'right', lang: 'ar' });
                doc.text(access_a, 81, 9, { align: 'right', lang: 'ar' });
                doc.setFontSize(6);
                doc.setFont('arialbd'); // set Arial
                doc.text(force_e, 4, 3, { align: 'left', lang: 'en' });
                doc.text(direc_e, 4, 6, { align: 'left', lang: 'en' });
                doc.text(access_e, 4, 9, { align: 'left', lang: 'en' });
                doc.setFontStyle('normal');
            }
            if (permit != "25" && access !=10) {
                var img = pf;
                doc.addImage(img, 'JPEG', 4, 17, 20, 20);
            }
            if (access != 10) {
                var sig = si;
                doc.addImage(sig, 'JPEG', 4, 43, 10, 10);
            }
            if (employees_list.includes(permit)) {
                if (access == 1 || access == 10) {
                    if (access == 1) {

                         doc.setFontSize(10);

                         doc.setFont('arialbd'); // set font
                         doc.text(service_number, 72, 23, {align: 'right', lang: 'ar' });
                         doc.text(frdate, 100, 38.5, { align: 'right', lang: 'ar' });
                         doc.text(date, 100, 44, { align: 'right', lang: 'ar' });
                         doc.setFont('Amiri'); // set font
                         doc.text(rank, 72, 27, { align: 'right', lang: 'ar' });
                         doc.text(name, 72, 31.5, { align: 'right', lang: 'ar' });
                         doc.text(proffession, 72, 36.5, { align: 'right', lang: 'ar' });



                         var img = pf;
                         doc.addImage(img, 'JPEG', 4, 20, 20, 20);



                         doc.addPage();
                         doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                         doc.setPage(2);

                         var barcode64 = textToBase64Barcode('@Model.BARCODE');
                         doc.addImage(barcode64, 'PNG', 18, 40, 50, 10);
                         doc.setTextColor(255, 0, 0);
                         doc.setFontSize(13);
                         doc.setFont('arialbd');
                    }
                    if (access == 10) {
                        var nameE = $("#nameE").text();
                        var blood = "Blood Group  " + $("#blood_type").text();
                        var numberc = "Number  " + $("#civil_number").text();
                        var post = $("#proffessionE").text();
                        var tdate = "Valid until";
                        var date = $("#date").text();
                        var tjoin_date = "Date of Joining";
                        var join_date = $("#joining_date").text();
                        doc.setFontSize(8);
                        doc.setFont('arialbd'); // set font
                        var wi = doc.internal.pageSize.getWidth();
                        var hi = doc.internal.pageSize.getHeight();
                        doc.addImage(imgdata, 'JPEG', 0, 0, wi, hi);

                        doc.text(nameE, wi / 2, 45, 'center');
                        doc.text(post, wi / 2, 50, 'center');
                        doc.text(tdate, wi / 2.6, 55, 'center');
                        doc.text(date, wi / 1.1, 51.5, 'center');
                        doc.text(tjoin_date, wi / 2.6, 60, 'center');
                        doc.text(join_date, wi / 1.1, 56.5, 'center');
                        doc.text(numberc, wi / 2, 65, 'center');
                        doc.text(blood, wi / 2, 70, 'center');

                        var img = pf;
                        doc.addImage(img, 'JPEG', 15, 16, 23, 25);
                        doc.addPage();
                        doc.addImage(imgdata2, 'JPEG', 0, 0, wi, hi);
                        doc.setPage(2);

                        var barcode64 = textToBase64Barcode('@Model.BARCODE');
                        doc.addImage(barcode64, 'PNG', 10, 55, 34, 10);

                    }
                }
                else {
                    if (with_car == "yes") {
                        doc.setFontSize(8.5);
                        doc.setFont('arialbd'); // set font
                        doc.text(":رقم المركبة", 81, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللون", 47, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللوحة", 35, 45, { align: 'right', lang: 'ar' });
                        doc.text(":نوع المركبة", 81, 45, { align: 'right', lang: 'ar' });
                        doc.text(":الوحدة", 81, 15, { align: 'right', lang: 'ar' });
                        doc.text(":الرقم", 81, 20, { align: 'right', lang: 'ar' });
                        doc.text(":الاسم", 81, 25, { align: 'right', lang: 'ar' });
                        doc.text(":الجنسية", 81, 30, { align: 'right', lang: 'ar' });
                        doc.text(":الجهة", 81, 35, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                        doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                    }
                    else {
                        doc.setFontSize(8.5);
                        doc.setFont('arialbd'); // set font
                        doc.text(":الوحدة", 81, 19, { align: 'right', lang: 'ar' });
                        doc.text(":الرقم", 81, 24, { align: 'right', lang: 'ar' });
                        doc.text(":الاسم", 81, 31, { align: 'right', lang: 'ar' });
                        doc.text(":الجنسية", 81, 36, { align: 'right', lang: 'ar' });
                        doc.text(":الجهة", 81, 41, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                        doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                    }
                    if (with_car == "yes") {
                        doc.setFontSize(9);
                        doc.setFont('arialbd'); // set font
                        var number_of_vehicle = vechilnum + " - " + char;
                        doc.text(number_of_vehicle, 67, 40, { align: 'right', lang: 'ar' });
                        doc.text(color, 40, 40, { align: 'right', lang: 'ar' });
                        doc.text(plate_type, 27, 45, { align: 'right', lang: 'ar' });
                        doc.text(type, 68, 45, { align: 'right', lang: 'ar' });
                        doc.text(service_number, 72, 20, { align: 'right', lang: 'ar' });
                        doc.setFont('Amiri'); // set font
                        doc.setFontSize(6);
                        doc.text(":الرتبة", 50, 20, { align: 'right', lang: 'ar' });
                        doc.setFontSize(9);
                        doc.text(rank, 43, 20, { align: 'right', lang: 'ar' });
                        doc.text(unit, 72, 35, { align: 'right', lang: 'ar' });
                        doc.setFont('Amiri'); // set font
                        doc.text(station, 72, 15, { align: 'right', lang: 'ar' });
                        if (permit == "27") {
                            doc.setFontSize(7);
                            doc.text(name, 72, 25, { align: 'right', lang: 'ar' });
                        }
                        else {
                            doc.text(name, 72, 25, { align: 'right', lang: 'ar' });
                        }
                        doc.text(identity, 72, 30, { align: 'right', lang: 'ar' });
                    }
                    else {
                        doc.setFontSize(9);
                        doc.setFont('arialbd'); // set font
                        doc.text(service_number, 72, 24, { align: 'right', lang: 'ar' });
                        doc.setFont('Amiri'); // set font
                        doc.setFontSize(6);
                        doc.text(":الرتبة", 50, 24, { align: 'right', lang: 'ar' });
                        doc.setFontSize(9);
                        doc.text(rank, 43, 24, { align: 'right', lang: 'ar' });
                        doc.text(unit, 72, 41, { align: 'right', lang: 'ar' });
                        doc.setFont('Amiri'); // set font
                        doc.text(station, 72, 19, { align: 'right', lang: 'ar' });
                        doc.text(name, 72, 31, { align: 'right', lang: 'ar' });
                        doc.text(identity, 72, 36, { align: 'right', lang: 'ar' });
                    }






                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    doc.text(date, 50, 46.5, { align: 'left', lang: 'en' });

                    doc.addPage();
                    doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                    doc.setPage(2);
                }


            }

            if (companies_list.includes(permit)) {
                if (permit == "45") {
                    doc.setFontSize(10);
                    doc.setFont('arialbd'); // set font
                    doc.text(civil_number, 72, 23, { align: 'right', lang: 'ar' });
                    doc.text(date, 100, 44, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.text(name, 72, 27, { align: 'right', lang: 'ar' });
                    doc.text(identity, 72, 31.5, { align: 'right', lang: 'ar' });
                    doc.text(proffession, 72, 36.7, { align: 'right', lang: 'ar' });
                    doc.text(company, 72, 42, { align: 'right', lang: 'ar' });
                    doc.addPage();
                    doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                    doc.setPage(2);

                    var barcode64 = textToBase64Barcode('@Model.BARCODE');
                    doc.addImage(barcode64, 'PNG', 18, 30, 50, 10);
                    doc.setTextColor(255, 0, 0);
                    doc.setFontSize(13);
                    //doc.setFont('arialbd'); // set font
                    var splitZone = doc.splitTextToSize(zones, 70);
                    let pageWidth = doc.internal.pageSize.getWidth();
                }
                else {
                    if (permit == "25") {
                        doc.setFontSize(8.5);
                        doc.setFont('arialbd'); // set font
                        doc.text(":الوحدة", 81, 24, { align: 'right', lang: 'ar' });
                        doc.text(":المستضيف", 81, 28, { align: 'right', lang: 'ar' });
                        doc.text(":نوع الاستخدام", 81, 32, { align: 'right', lang: 'ar' });
                        doc.text(":الشركة", 81, 36, { align: 'right', lang: 'ar' });
                        doc.text(":رقم المركبة", 81, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللون", 47, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللوحة", 35, 45, { align: 'right', lang: 'ar' });
                        doc.text(":نوع المركبة", 81, 45, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                        doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                        doc.setFontSize(9);
                        doc.setFont('arialbd'); // set font

                        doc.text(date, 50, 46.5, { align: 'left', lang: 'en' });
                        var number_of_vehicle = vechilnum + " - " + char;
                        doc.text(number_of_vehicle, 67, 40, { align: 'right', lang: 'ar' });
                        doc.setFont('Amiri'); // set font


                        doc.text(station, 72, 24, { align: 'right', lang: 'ar' });
                        doc.text(unit, 68, 28, { align: 'right', lang: 'ar' });
                        doc.text(access_a, 65, 32, { align: 'right', lang: 'ar' });
                        doc.text(company, 72, 36, { align: 'right', lang: 'ar' });

                        doc.text(color, 40, 40, { align: 'right', lang: 'ar' });
                        doc.text(plate_type, 27, 45, { align: 'right', lang: 'ar' });

                        doc.text(type, 68, 45, { align: 'right', lang: 'ar' });


                        doc.addPage();
                        doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                        doc.setPage(2);


                    }
                    else {
                        if (with_car == "yes") {
                            doc.setFontSize(8.5);
                            doc.setFont('arialbd'); // set font
                            doc.text(":رقم المركبة", 81, 40, { align: 'right', lang: 'ar' });
                            doc.text(":اللون", 47, 40, { align: 'right', lang: 'ar' });
                            doc.text(":اللوحة", 35, 45, { align: 'right', lang: 'ar' });
                            doc.text(":نوع المركبة", 81, 45, { align: 'right', lang: 'ar' });
                            doc.text(":الوحدة", 81, 15, { align: 'right', lang: 'ar' });
                            doc.text(":الرقم", 81, 20, { align: 'right', lang: 'ar' });
                            doc.text(":الاسم", 81, 24, { align: 'right', lang: 'ar' });
                            doc.text(":الجنسية", 81, 28, { align: 'right', lang: 'ar' });
                            doc.text(":المستضيف", 81, 32, { align: 'right', lang: 'ar' });
                            doc.text(":الشركة", 81, 36, { align: 'right', lang: 'ar' });
                            doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                            doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                        }
                        else {
                            doc.setFontSize(8.5);
                            doc.setFont('arialbd'); // set font
                            doc.text(":الوحدة", 81, 19, { align: 'right', lang: 'ar' });
                            doc.text(":الرقم", 81, 24, { align: 'right', lang: 'ar' });
                            doc.text(":الاسم", 81, 29, { align: 'right', lang: 'ar' });
                            doc.text(":الجنسية", 81, 33, { align: 'right', lang: 'ar' });
                            doc.text(":المستضيف", 81, 37, { align: 'right', lang: 'ar' });
                            doc.text(":الشركة", 81, 41, { align: 'right', lang: 'ar' });
                            doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                            doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                        }
                        if (with_car == "yes") {
                            doc.setFontSize(9);
                            doc.setFont('arialbd'); // set font
                            var number_of_vehicle = vechilnum + " - " + char;
                            doc.text(number_of_vehicle, 67, 40, { align: 'right', lang: 'ar' });
                            doc.text(civil_number, 72, 20, { align: 'right', lang: 'ar' });
                            doc.setFont('Amiri'); // set font
                            doc.text(station, 72, 15, { align: 'right', lang: 'ar' });
                            doc.text(name, 72, 24, { align: 'right', lang: 'ar' });
                            doc.text(identity, 72, 27.5, { align: 'right', lang: 'ar' });
                            doc.setFontSize(8);
                            doc.text(unit, 69, 32, { align: 'right', lang: 'ar' });
                            doc.setFontSize(9);
                            doc.text(company, 72, 35.5, { align: 'right', lang: 'ar' });
                            doc.text(color, 40, 40, { align: 'right', lang: 'ar' });
                            doc.text(plate_type, 27, 45, { align: 'right', lang: 'ar' });
                            doc.text(type, 68, 45, { align: 'right', lang: 'ar' });

                        }
                        else {
                            doc.setFontSize(9);
                            doc.setFont('arialbd'); // set font
                            doc.text(civil_number, 72, 24, { align: 'right', lang: 'ar' });
                            doc.setFont('Amiri'); // set font
                            doc.text(station, 72, 19, { align: 'right', lang: 'ar' });
                            doc.text(name, 72, 29, { align: 'right', lang: 'ar' });
                            doc.text(identity, 72, 32.8, { align: 'right', lang: 'ar' });
                            doc.setFontSize(8);
                            doc.text(unit, 69, 37, { align: 'right', lang: 'ar' });
                            doc.setFontSize(9);
                            doc.text(company, 72, 40.5, { align: 'right', lang: 'ar' });
                        }

                        doc.setFontSize(9);
                        doc.setFont('arialbd'); // set font
                        doc.text(date, 50, 46.5, { align: 'left', lang: 'en' });

                        doc.addPage();
                        doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                        doc.setPage(2);
                    }
                }

            }

            if (families_list.includes(permit)) {
                doc.setFontSize(8.5);
                doc.setFont('arialbd'); // set font
                if (with_car == "yes") {
                    doc.text(":الوحدة", 81, 15, { align: 'right', lang: 'ar' });
                    doc.text(":الرقم", 81, 20, { align: 'right', lang: 'ar' });
                    doc.text(":الاسم", 81, 24, { align: 'right', lang: 'ar' });
                    doc.text(":الجنسية", 81, 28, { align: 'right', lang: 'ar' });
                    doc.text(":المستضيف", 81, 32, { align: 'right', lang: 'ar' });
                    doc.text(":الجهة", 81, 36, { align: 'right', lang: 'ar' });
                    doc.text(":رقم المركبة", 81, 40, { align: 'right', lang: 'ar' });
                    doc.text(":اللون", 47, 40, { align: 'right', lang: 'ar' });
                    doc.text(":اللوحة", 35, 45, { align: 'right', lang: 'ar' });
                    doc.text(":نوع المركبة", 81, 45, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7);
                    doc.text(":عدد المستضافين", 40, 45, { align: 'right', lang: 'ar' });
                    doc.text(":رقم المنزل", 23, 45, { align: 'right', lang: 'ar' });
                    doc.setFontSize(8.5);
                    doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                    doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                }
                else {
                    doc.text(":الوحدة", 81, 19, { align: 'right', lang: 'ar' });
                    doc.text(":الرقم", 81, 24, { align: 'right', lang: 'ar' });
                    doc.text(":الاسم", 81, 29, { align: 'right', lang: 'ar' });
                    doc.text(":الجنسية", 81, 33, { align: 'right', lang: 'ar' });
                    doc.text(":المستضيف", 81, 37, { align: 'right', lang: 'ar' });
                    doc.text(":الجهة", 81, 41, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7);
                    doc.text(":عدد المستضافين", 40, 45, { align: 'right', lang: 'ar' });
                    doc.text(":رقم المنزل", 23, 45, { align: 'right', lang: 'ar' });
                    doc.setFontSize(8.5);
                    doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                    doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });

                }
                if (with_car == "yes") {
                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    var number_of_vehicle = vechilnum + " - " + char;
                    doc.text(number_of_vehicle, 67, 40, { align: 'right', lang: 'ar' });
                    doc.text(civil_number, 72, 20, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.text(station, 72, 15, { align: 'right', lang: 'ar' });
                    doc.text(name, 72, 24, { align: 'right', lang: 'ar' });
                    doc.text(identity, 72, 27.5, { align: 'right', lang: 'ar' });
                    //doc.text(respo, 71, 32, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7.5);
                    //doc.text(respo, 99.6, 27.8, { align: 'right', lang: 'ar' });
                    doc.text(respo, 69, 32, { align: 'right', lang: 'ar' });

                    doc.setFontSize(8);
                    doc.text(unit, 72, 36, { align: 'right', lang: 'ar' });
                    doc.text(color, 40, 40, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7);
                    doc.text(plate_type, 27, 45, { align: 'right', lang: 'ar' });
                    doc.text(type, 68, 45, { align: 'right', lang: 'ar' });
                    doc.setFont('arialbd'); // set font
                    doc.text(num_hosted, 26, 45, { align: 'right', lang: 'ar' });
                    doc.text(num_building, 13, 45, { align: 'right', lang: 'ar' });

                }
                else {

                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    doc.text(civil_number, 72, 24, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.text(station, 72, 19, { align: 'right', lang: 'ar' });
                    doc.text(name, 72, 28.5, { align: 'right', lang: 'ar' });
                    doc.text(identity, 72, 33, { align: 'right', lang: 'ar' });
                    //doc.text(respo, 71, 32, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7.5);
                    //doc.text(respo, 99.6, 27.8, { align: 'right', lang: 'ar' });
                    doc.text(respo, 69, 36.8, { align: 'right', lang: 'ar' });
                    doc.setFontSize(8);
                    doc.text(unit, 72, 41, { align: 'right', lang: 'ar' });
                    doc.setFontSize(7);
                    doc.setFont('arialbd'); // set font
                    doc.text(num_hosted, 26, 45, { align: 'right', lang: 'ar' });
                    doc.text(num_building, 13, 45, { align: 'right', lang: 'ar' });
                }
                        doc.setFontSize(9);
                        doc.setFont('arialbd'); // set font
                        doc.text(date, 50, 46.5, { align: 'left', lang: 'en' });
                        doc.addPage();
                        doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                        doc.setPage(2);


            }


            if (others_list.includes(permit)) {

                    if (with_car == "yes") {
                        doc.setFontSize(8.5);
                        doc.setFont('arialbd'); // set font
                        doc.text(":رقم المركبة", 81, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللون", 47, 40, { align: 'right', lang: 'ar' });
                        doc.text(":اللوحة", 35, 45, { align: 'right', lang: 'ar' });
                        doc.text(":نوع المركبة", 81, 45, { align: 'right', lang: 'ar' });
                        doc.text(":الوحدة", 81, 15, { align: 'right', lang: 'ar' });
                        doc.text(":الرقم", 81, 20, { align: 'right', lang: 'ar' });
                        doc.text(":الاسم", 81, 25, { align: 'right', lang: 'ar' });
                        if (permit == "31" || permit == "32") {
                            if (force_id == "3") {
                                doc.text(":الغرض", 81, 30, { align: 'right', lang: 'ar' });

                            }
                            else {
                                doc.text(":التخصص", 81, 30, { align: 'right', lang: 'ar' });

                            }
                        }
                        else {
                            doc.text(":الجنسية", 81, 30, { align: 'right', lang: 'ar' });

                        }
                        doc.text(":الجهة", 81, 35, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                        doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                    }
                    else {
                        doc.setFontSize(8.5);
                        doc.setFont('arialbd'); // set font
                        doc.text(":الوحدة", 81, 19, { align: 'right', lang: 'ar' });
                        doc.text(":الرقم", 81, 25, { align: 'right', lang: 'ar' });
                        doc.text(":الاسم", 81, 30, { align: 'right', lang: 'ar' });
                        if (permit == "31" || permit == "32") {
                            if (force_id == "3") {
                                doc.text(":الغرض", 81, 35, { align: 'right', lang: 'ar' });

                            }
                            else {
                                doc.text(":التخصص", 81, 35, { align: 'right', lang: 'ar' });

                            }
                        }
                        else {
                            doc.text(":الجنسية", 81, 35, { align: 'right', lang: 'ar' });

                        }
                        doc.text(":الجهة", 81, 40, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 81, 50, { align: 'right', lang: 'ar' });
                        doc.text(":سلطة التخويل", 30, 50, { align: 'right', lang: 'ar' });
                    }

                if (with_car == "yes") {
                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    var number_of_vehicle = vechilnum + " - " + char;
                    doc.text(number_of_vehicle, 67, 40, { align: 'right', lang: 'ar' });
                    doc.text(civil_number, 72, 20, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.setFontSize(6);
                    doc.text(":الرتبة-الدرجة", 55, 20, { align: 'right', lang: 'ar' });
                    doc.setFontSize(9);
                    doc.text(rank, 40, 20, { align: 'right', lang: 'ar' });
                    doc.text(unit, 72, 34.5, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.text(station, 72, 15, { align: 'right', lang: 'ar' });
                    doc.text(name, 72, 25, { align: 'right', lang: 'ar' });
                    if (permit == "31" || permit == "32") {
                        if (force_id == "3") {
                            doc.setTextColor(255, 0, 0);
                            doc.text(puprpose, 72, 30, { align: 'right', lang: 'ar' });
                        }
                        else {
                            doc.text(proffession, 72, 30, { align: 'right', lang: 'ar' });

                        }
                    }
                    else {
                        doc.text(identity, 72, 30, { align: 'right', lang: 'ar' });

                    }
                    doc.setTextColor(0, 0, 0);
                    doc.text(color, 40, 40, { align: 'right', lang: 'ar' });
                    doc.text(plate_type, 27, 45, { align: 'right', lang: 'ar' });
                    doc.text(type, 68, 45, { align: 'right', lang: 'ar' });

                }
                else {
                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    doc.text(civil_number, 72, 25, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.setFontSize(6);
                    doc.text(":الرتبة-الدرجة", 55, 25, { align: 'right', lang: 'ar' });
                    doc.setFontSize(9);
                    doc.text(rank, 40, 25, { align: 'right', lang: 'ar' });
                    doc.text(unit, 72, 40, { align: 'right', lang: 'ar' });
                    doc.setFont('Amiri'); // set font
                    doc.text(station, 72, 19, { align: 'right', lang: 'ar' });
                    doc.text(name, 72, 30, { align: 'right', lang: 'ar' });
                    if (permit == "31" || permit == "32") {
                        if (force_id == "3") {
                            doc.setTextColor(255, 0, 0);
                            doc.text(puprpose, 72, 35, { align: 'right', lang: 'ar' });
                        }
                        else {
                            doc.text(proffession, 72, 35, { align: 'right', lang: 'ar' });

                        }
                    }
                    else {
                        doc.text(identity, 72, 35, { align: 'right', lang: 'ar' });

                    }
                    doc.setTextColor(0, 0, 0);

                }
                    doc.setFontSize(9);
                    doc.setFont('arialbd'); // set font
                    doc.text(date, 50, 46.5, { align: 'left', lang: 'en' });
                    doc.addPage();
                    doc.addImage(imgdata2, 'JPEG', 0, 0, 85.6, 54);
                    doc.setPage(2);





            }

            if (access != 1 && access != 6 && access !=10) {
                var barcode64 = textToBase64Barcode('@Model.BARCODE');
                doc.addImage(barcode64, 'PNG', 18, 41, 50, 10);

                doc.setTextColor(255, 0, 0);
                doc.setFontSize(11);
                doc.setFont('arialbd'); // set font
                var splitZone = doc.splitTextToSize(zones, 70);
                doc.text(splitZone, 77, 15, { align: 'right', lang: 'ar' });
                doc.setTextColor(0, 0, 0);
                doc.setFontSize(8.5);
                //doc.setFont('arialbd'); // set font
                doc.setFont('Amiri'); // set font
                //doc.setFont('arialbd'); // set font

                doc.setFontSize(6);
                var text1 = ".هذا التصريح ملك لـ" + force_a + " وحيازته لغير المصرح له بالاستخدام يعتبر جرما" + "*";
                var text2 = "إذا عثر عليه يسلم لأقرب وحدة عسكرية أو شرطة عمان السلطانية أو الاتصال بـ" + "*";
                var text3 = ".يجب إبراز التــــــــــــصريح للــــــحارس عـند البوابــات والمنـاطق الأمـنية المـصرح بالـــدخول إليها" + "*";
                var text4 = ".يعتبر الشخص مسؤولا عن التصريح وفي حالة الإنتهاء يسلم إلى قسم التصاريح الخاص بالوحدة" + "*";
                var text_1 = doc.splitTextToSize(text1, 93);
                var text_2 = doc.splitTextToSize(text2, 93);
                var text_3 = doc.splitTextToSize(text3, 93);
                var text_4 = doc.splitTextToSize(text4, 93);
                doc.text(text_1, 81, 25, { align: 'right', lang: 'ar' });
                doc.text(text_2, 81, 27.2, { align: 'right', lang: 'ar' });
                doc.text(text_3, 81, 29.2, { align: 'right', lang: 'ar' });
                doc.text(text_4, 81, 31.2, { align: 'right', lang: 'ar' });
                doc.setFont('arialbd'); // set font
                //doc.setFontStyle('italic');
                doc.setFontSize(6);

                var text5 = "*This permit for " + force_e + ",unothorized use is against security.";
                var text6 = "*When found take it to the military unit, Royal Oman Police or call: " + phone + ".";
                var text7 = "*Entry permit must be showen at each unit gate and zone when required."
                var text8 = "*When expired, please return it to the authorized unit section."
                doc.text(text5, 4, 34, { align: 'justify', lang: 'en' });
                doc.text(text6, 4, 36.2, { align: 'justify', lang: 'en' });
                doc.text(text7, 4, 38.1, { align: 'justify', lang: 'en' });
                doc.text(text8, 4, 40.3, { align: 'justify', lang: 'en' });
                doc.setFont('arialbd'); // set font
                var text0 = "." + phone;
                doc.text(text0, 7, 27.2, { align: 'justify', lang: 'en' });
            }

            var string = doc.output('datauristring');

            document.getElementById("frame").style.display = "block";
            $('#frame').attr('src', string);




        }



        function PrintTempForm() {

            var model1 = '@Html.Raw(Json.Encode(employees))';
            var model2 = '@Html.Raw(Json.Encode(others))';
            var model3 = '@Html.Raw(Json.Encode(Families))';
            var model4 = '@Html.Raw(Json.Encode(companies))';
            var employees_list = JSON.parse(model1);
            var others_list = JSON.parse(model2);
            var families_list = JSON.parse(model3);
            var companies_list = JSON.parse(model4);
            var access = $("#access").text();



            var doc = new jsPDF('p', 'mm', [297, 210]);



            doc.addFileToVFS("Amiri-Regular.ttf", AmiriRegular);
            doc.addFont('Amiri-Regular.ttf', 'Amiri', 'normal');

            doc.addFileToVFS("Arialbd.ttf", Arial);
            doc.addFont('Arialbd.ttf', 'arialbd', 'normal');
            var imgdata;
            imgdata = $("#form_layout").text();

            var width = doc.internal.pageSize.getWidth();
            var height = doc.internal.pageSize.getHeight();
            doc.addImage(imgdata, 'JPEG', 0, 0, width, height );
            var logo;
            //var imgdata2;
            logo = $("#force_logo").text();
            doc.addImage(logo, 'JPEG', width / 2.2, 3, 7, 7);
            var img = pf;

            var force_id = $("#force_id").text();
            var force_a = $("#force_a").text();
            var force_e = $("#force_e").text();
            var direc_a = $("#directorate_a").text();
            var direc_e = $("#directorate_e").text();
            var access_a = $("#access_type_a").text();
            var access_e = $("#access_type_e").text();
            var permit = $("#permit_secret_code").text();
            var name = $("#name").text();
            var rank = $("#rank").text();
            var company = $("#company").text();
            var identity = $("#identity").text();
            var station = $("#station").text();
            var service_number = $("#service_number").text();
            var civil_number = $("#civil_number").text();
            var proffession = $("#proffession").text();
            var respo = $("#host_name").text();
            var with_car = $("#with_car").text();
            var vechilnum = $("#vechilnum").text();
            var char = $("#char").text();
            var type = $("#type").text();
            var color = $("#color").text();
            var date = $("#date").text();
            var zones = $("#zones").text();
            var unit = $("#unit").text();
            var phone = $("#phone_num").text();
            var puprpose = $("#puprpose").text();
            var num_hosted = $("#num_hosted").text();
            var num_building = $("#num_building").text();
            var frdate = $("#frdate").text();
            var mmrr = $("#mmrr").text();
            if (force_id != "2") {
                if (permit != "25") {
                    doc.addImage(img, 'JPEG', 6, 16, 10, 10);
                }
            }
            doc.setFontSize(6);

            doc.setFont('arialbd'); // set font

            doc.setFontStyle('italic');
            doc.text(force_e, 3, 7, { align: 'left', lang: 'en' });
            doc.text(direc_e, 3, 9.5, { align: 'left', lang: 'en' });
            doc.text(access_e, 3, 11.7, { align: 'left', lang: 'en' });
            doc.setFontStyle('normal');
            doc.setFontSize(6);
            doc.setFont('Amiri'); // set font
            doc.text(force_a, 71, 7, { align: 'right', lang: 'ar' });
            doc.text(direc_a, 71, 9.5, { align: 'right', lang: 'ar' });
            doc.text(access_a, 71, 11.7, { align: 'right', lang: 'ar' });
            doc.setFontSize(8);

            doc.text("تصريح دخول مؤقت", 70, 20, { align: 'right', lang: 'ar' });

            if (employees_list.includes(permit)) {
                if (access == 1 || access == 10) {
                    alert("غير مسموح طباعة تصاريح مؤقته لهذا النوع من التصاريح!");
                }
                else {
                    Print("TemproryCard");
                    doc.setFontSize(5);
                    doc.text(":الوحــدة", 70, 26, { align: 'right', lang: 'ar' });
                    doc.text(":الـــرقم", 70, 30, { align: 'right', lang: 'ar' });
                    doc.text(":الرتبة", 70, 33, { align: 'right', lang: 'ar' });
                    doc.text(":الاســــم", 70, 36, { align: 'right', lang: 'ar' });
                    doc.text(":الجـنسية", 70, 39, { align: 'right', lang: 'ar' });
                    doc.text(":الـــجهة", 70, 42, { align: 'right', lang: 'ar' });
                    doc.text(":بيانات المركبة", 70, 45, { align: 'right', lang: 'ar' });
                    doc.text(":تاريخ الإصدار", 70, 48, { align: 'right', lang: 'ar' });
                    doc.text(":تاريخ الانتهاء", 70, 51, { align: 'right', lang: 'ar' });
                    doc.setFontSize(5);
                    doc.setFont('arialbd'); // set font
                    doc.text(service_number, 52, 30, { align: 'right', lang: 'ar' });
                    doc.text(frdate, 42,46, { align: 'left', lang: 'en' });
                    doc.text(date, 42, 49, { align: 'left', lang: 'en' });
                    if (with_car == "yes") {
                        doc.setFontSize(5);
                        var number_of_vehicle = "الرقم: " + vechilnum + "-" + char;
                        var color_type = " - اللون: " + color + " - النوع: " + type;
                        doc.text(number_of_vehicle + color_type, 52, 45, { align: 'right', lang: 'ar' });
                    }
                    doc.setFontSize(5);
                    doc.setFont('Amiri'); // set font
                    doc.text(station, 52, 26, { align: 'right', lang: 'ar' });
                    doc.text(rank, 52, 33, { align: 'right', lang: 'ar' });
                    doc.text(name, 52, 36, { align: 'right', lang: 'ar' });
                    doc.text(identity, 52, 39, { align: 'right', lang: 'ar' });
                    doc.text(unit, 52, 42, { align: 'right', lang: 'ar' });

                    doc.setTextColor(0, 0, 0);
                    //doc.line(70, 85, 6, 85);
                    doc.line(70, 27, 6, 27);
                    doc.line(70, 31, 6, 31);
                    doc.line(70, 34, 6, 34);
                    doc.line(70, 37, 6, 37);
                    doc.line(70, 40, 6, 40);
                    doc.line(70, 43, 6, 43);
                    doc.line(70, 46, 6, 46);
                    doc.line(70, 49, 6, 49);
                    doc.line(53, 54, 53, 24);

                    doc.text(" :سلطة التخويل", 70, 90, { align: 'right', lang: 'ar' });
                    var barcode64 = textToBase64Barcode('@Model.BARCODE');
                    doc.addImage(barcode64, 'PNG', 5, 90, 20, 10);
                    doc.setFontSize(6);
                    doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 75, { align: 'right', lang: 'ar' });
                    //doc.setTextColor(0, 0, 255);
                    doc.text(zones, 70, 80, { align: 'right', lang: 'ar' });
                    doc.setFontSize(5);

                    if (force_id != "2") {
                        var sig = si;
                        doc.addImage(sig, 'JPEG', 58, 90, 13, 13);
                    }

                    var string = doc.output('datauristring');

                    document.getElementById("frame").style.display = "block";
                    $('#frame').attr('src', string);
                }
            }
            if (others_list.includes(permit)) {

                Print("TemproryCard");
                doc.setFontSize(5);

                doc.text(":الوحــدة", 70, 26, { align: 'right', lang: 'ar' });
                doc.text(":الـــرقم", 70, 30, { align: 'right', lang: 'ar' });
                doc.text(":الرتبة - الدرجة", 70, 33, { align: 'right', lang: 'ar' });
                doc.text(":الاســــم", 70, 36, { align: 'right', lang: 'ar' });
                if (permit == "31" || permit == "32") {
                    if (force_id == "3") {
                        doc.text(":الغرض", 70, 39, { align: 'right', lang: 'ar' });

                    }
                    else {
                        doc.text(":التخصص", 70, 39, { align: 'right', lang: 'ar' });

                    }
                }
                else {
                    doc.text(":الجـنسية", 70, 39, { align: 'right', lang: 'ar' });

                }
                doc.text(":الـــجهة", 70, 42, { align: 'right', lang: 'ar' });
                doc.text(":بيانات المركبة", 70, 45, { align: 'right', lang: 'ar' });
                doc.text(":تاريخ الإصدار", 70, 48, { align: 'right', lang: 'ar' });
                doc.text(":تاريخ الانتهاء", 70, 51, { align: 'right', lang: 'ar' });
                doc.setFontSize(5);
                doc.setFont('arialbd'); // set font
                doc.text(civil_number, 52, 30, { align: 'right', lang: 'ar' });
                doc.text(frdate, 42,46, { align: 'left', lang: 'en' });
                doc.text(date, 42, 49, { align: 'left', lang: 'en' });
                if (with_car == "yes") {
                    doc.setFontSize(5);
                    var number_of_vehicle = "الرقم: " + vechilnum + "-" + char;
                    var color_type = " - اللون: " + color + " - النوع: " + type;
                    doc.text(number_of_vehicle + color_type, 52, 45, { align: 'right', lang: 'ar' });
                }
                doc.setFontSize(5);
                doc.setFont('Amiri'); // set font
                doc.text(station, 52, 26, { align: 'right', lang: 'ar' });
                doc.text(rank, 52, 33, { align: 'right', lang: 'ar' });
                doc.text(name, 52, 36, { align: 'right', lang: 'ar' });
                if (permit == "31" || permit == "32") {
                    if (force_id == "3") {
                        doc.setTextColor(255, 0, 0);
                        doc.text(puprpose, 52, 39, { align: 'right', lang: 'ar' });
                    }
                    else {
                        doc.text(proffession, 52, 39, { align: 'right', lang: 'ar' });

                    }
                }
                else {
                    doc.text(identity, 52, 39, { align: 'right', lang: 'ar' });

                }
                doc.setTextColor(0, 0, 0);

                doc.text(unit, 52, 42, { align: 'right', lang: 'ar' });

                doc.setTextColor(0, 0, 0);
                //doc.line(70, 85, 6, 85);
                doc.line(70, 27, 6, 27);
                doc.line(70, 31, 6, 31);
                doc.line(70, 34, 6, 34);
                doc.line(70, 37, 6, 37);
                doc.line(70, 40, 6, 40);
                doc.line(70, 43, 6, 43);
                doc.line(70, 46, 6, 46);
                doc.line(70, 49, 6, 49);
                doc.line(53, 54, 53, 24);

                    doc.text(" :سلطة التخويل", 70, 90, { align: 'right', lang: 'ar' });
                    var barcode64 = textToBase64Barcode('@Model.BARCODE');
                    doc.addImage(barcode64, 'PNG', 5, 90, 20, 10);
                    doc.setFontSize(6);
                    doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 75, { align: 'right', lang: 'ar' });
                    //doc.setTextColor(0, 0, 255);
                    doc.text(zones, 70, 80, { align: 'right', lang: 'ar' });
                    doc.setFontSize(5);

                if (force_id != "2") {
                    var sig = si;
                    doc.addImage(sig, 'JPEG', 58, 90, 13, 13);
                }

                var string = doc.output('datauristring');

                document.getElementById("frame").style.display = "block";
                $('#frame').attr('src', string);

            }
            if (companies_list.includes(permit)) {

                if (access == 6) {
                    alert("غير مسموح طباعة تصاريح مؤقته لهذا النوع من التصاريح!");
                }
                else {
                    if (permit == "25") {
                        Print("TemproryCard");
                        doc.setFontSize(5);

                        doc.text(":الوحــدة", 70, 26, { align: 'right', lang: 'ar' });
                        doc.text(":نوع الاستخدام", 70, 33, { align: 'right', lang: 'ar' });
                        doc.text(":الـــجهة", 70, 39, { align: 'right', lang: 'ar' });
                        doc.text(":الـشركة", 70, 42, { align: 'right', lang: 'ar' });
                        doc.text(":بيانات المركبة", 70, 45, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الإصدار", 70, 48, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 70, 51, { align: 'right', lang: 'ar' });
                        doc.setFontSize(5);
                        doc.setFont('arialbd'); // set font
                        doc.text(frdate, 42, 46, { align: 'left', lang: 'en' });
                        doc.text(date, 42, 49, { align: 'left', lang: 'en' });
                        if (with_car == "yes") {
                            doc.setFontSize(5);
                            var number_of_vehicle = "الرقم: " + vechilnum + "-" + char;
                            var color_type = " - اللون: " + color + " - النوع: " + type;
                            doc.text(number_of_vehicle + color_type, 52, 45, { align: 'right', lang: 'ar' });
                        }
                        doc.setFontSize(5);
                        doc.setFont('Amiri'); // set font
                        doc.text(station, 52, 26, { align: 'right', lang: 'ar' });
                        doc.text(access_a, 52, 33, { align: 'right', lang: 'ar' });
                        doc.text(unit, 52, 39, { align: 'right', lang: 'ar' });
                        doc.text(company, 52, 42, { align: 'right', lang: 'ar' });

                        doc.setTextColor(0, 0, 0);
                        //doc.line(70, 85, 6, 85);
                        doc.line(70, 27, 6, 27);
                        //doc.line(70, 31, 6, 31);
                        //doc.line(70, 34, 6, 34);
                        doc.line(70, 37, 6, 37);
                        doc.line(70, 40, 6, 40);
                        doc.line(70, 43, 6, 43);
                        doc.line(70, 46, 6, 46);
                        doc.line(70, 49, 6, 49);
                        doc.line(53, 54, 53, 24);

                        doc.text(" :سلطة التخويل", 70, 90, { align: 'right', lang: 'ar' });
                        var barcode64 = textToBase64Barcode('@Model.BARCODE');
                        doc.addImage(barcode64, 'PNG', 5, 90, 20, 10);
                        doc.setFontSize(6);
                        doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 75, { align: 'right', lang: 'ar' });
                        //doc.setTextColor(0, 0, 255);
                        doc.text(zones, 70, 80, { align: 'right', lang: 'ar' });
                        doc.setFontSize(5);

                        if (force_id != "2") {
                            var sig = si;
                            doc.addImage(sig, 'JPEG', 58, 90, 13, 13);
                        }

                        var string = doc.output('datauristring');

                        document.getElementById("frame").style.display = "block";
                        $('#frame').attr('src', string);

                    }
                    else {
                        Print("TemproryCard");
                        doc.setFontSize(5);

                        doc.text(":الوحــدة", 70, 26, { align: 'right', lang: 'ar' });
                        doc.text(":الـــرقم", 70, 30, { align: 'right', lang: 'ar' });
                        doc.text(":الاسم", 70, 33, { align: 'right', lang: 'ar' });
                        doc.text(":الجـنسية", 70, 36, { align: 'right', lang: 'ar' });
                        doc.text(":الـــجهة", 70, 39, { align: 'right', lang: 'ar' });
                        doc.text(":الـشركة", 70, 42, { align: 'right', lang: 'ar' });
                        doc.text(":بيانات المركبة", 70, 45, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الإصدار", 70, 48, { align: 'right', lang: 'ar' });
                        doc.text(":تاريخ الانتهاء", 70, 51, { align: 'right', lang: 'ar' });
                        doc.setFontSize(5);
                        doc.setFont('arialbd'); // set font
                        doc.text(civil_number, 52, 30, { align: 'right', lang: 'ar' });
                        doc.text(frdate, 42, 46, { align: 'left', lang: 'en' });
                        doc.text(date, 42, 49, { align: 'left', lang: 'en' });
                        if (with_car == "yes") {
                            doc.setFontSize(5);
                            var number_of_vehicle = "الرقم: " + vechilnum + "-" + char;
                            var color_type = " - اللون: " + color + " - النوع: " + type;
                            doc.text(number_of_vehicle + color_type, 52, 45, { align: 'right', lang: 'ar' });
                        }
                        doc.setFontSize(5);
                        doc.setFont('Amiri'); // set font
                        doc.text(station, 52, 26, { align: 'right', lang: 'ar' });
                        doc.text(name, 52, 33, { align: 'right', lang: 'ar' });
                        doc.text(identity, 52, 36, { align: 'right', lang: 'ar' });
                        doc.text(unit, 52, 39, { align: 'right', lang: 'ar' });
                        doc.text(company, 52, 42, { align: 'right', lang: 'ar' });

                        doc.setTextColor(0, 0, 0);
                        //doc.line(70, 85, 6, 85);
                        doc.line(70, 27, 6, 27);
                        doc.line(70, 31, 6, 31);
                        doc.line(70, 34, 6, 34);
                        doc.line(70, 37, 6, 37);
                        doc.line(70, 40, 6, 40);
                        doc.line(70, 43, 6, 43);
                        doc.line(70, 46, 6, 46);
                        doc.line(70, 49, 6, 49);
                        doc.line(53, 54, 53, 24);

                        doc.text(" :سلطة التخويل", 70, 90, { align: 'right', lang: 'ar' });
                        var barcode64 = textToBase64Barcode('@Model.BARCODE');
                        doc.addImage(barcode64, 'PNG', 5, 90, 20, 10);
                        doc.setFontSize(6);
                        doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 75, { align: 'right', lang: 'ar' });
                        //doc.setTextColor(0, 0, 255);
                        doc.text(zones, 70, 80, { align: 'right', lang: 'ar' });
                        doc.setFontSize(5);

                        if (force_id != "2") {
                            var sig = si;
                            doc.addImage(sig, 'JPEG', 58, 90, 13, 13);
                        }

                        var string = doc.output('datauristring');

                        document.getElementById("frame").style.display = "block";
                        $('#frame').attr('src', string);
                    }
                }
            }

            if (families_list.includes(permit)) {
                Print("TemproryCard");
                doc.setFontSize(5);

                doc.text(":الوحــدة", 70, 26, { align: 'right', lang: 'ar' });
                doc.text(":الـــرقم", 70, 30, { align: 'right', lang: 'ar' });
                doc.text(":الاســــم", 70, 33, { align: 'right', lang: 'ar' });
                doc.text(":الجـنسية", 70, 36, { align: 'right', lang: 'ar' });
                doc.text(":المستضيف", 70, 39, { align: 'right', lang: 'ar' });
                doc.text(":الـــجهة", 70, 42, { align: 'right', lang: 'ar' });
                doc.text(":عدد المستضافين", 70, 45, { align: 'right', lang: 'ar' });
                doc.text(":رقم المنزل", 70, 48, { align: 'right', lang: 'ar' });
                doc.text(":بيانات المركبة", 70, 51, { align: 'right', lang: 'ar' });
                doc.text(":تاريخ الإصدار", 70, 54, { align: 'right', lang: 'ar' });
                doc.text(":تاريخ الانتهاء", 70, 57, { align: 'right', lang: 'ar' });
                doc.setFontSize(5);
                doc.setFont('arialbd'); // set font
                doc.text(civil_number, 52, 30, { align: 'right', lang: 'ar' });
                doc.text(num_hosted, 52, 45, { align: 'right', lang: 'ar' });
                doc.text(num_building, 52, 48, { align: 'right', lang: 'ar' });
                doc.text(frdate, 42, 52, { align: 'left', lang: 'en' });
                doc.text(date, 42, 55, { align: 'left', lang: 'en' });
                if (with_car == "yes") {
                    doc.setFontSize(5);
                    var number_of_vehicle = "الرقم: " + vechilnum + "-" + char;
                    var color_type = " - اللون: " + color + " - النوع: " + type;
                    doc.text(number_of_vehicle + color_type, 52, 51, { align: 'right', lang: 'ar' });
                }
                doc.setFontSize(5);
                doc.setFont('Amiri'); // set font
                doc.text(station, 52, 26, { align: 'right', lang: 'ar' });
                doc.text(name, 52, 33, { align: 'right', lang: 'ar' });
                doc.text(identity, 52, 36, { align: 'right', lang: 'ar' });
                doc.text(respo, 52, 39, { align: 'right', lang: 'ar' });
                doc.text(unit, 52, 42, { align: 'right', lang: 'ar' });

                doc.setTextColor(0, 0, 0);
                //doc.line(70, 85, 6, 85);
                doc.line(70, 27, 6, 27);
                doc.line(70, 31, 6, 31);
                doc.line(70, 34, 6, 34);
                doc.line(70, 37, 6, 37);
                doc.line(70, 40, 6, 40);
                doc.line(70, 43, 6, 43);
                doc.line(70, 46, 6, 46);
                doc.line(70, 49, 6, 49);
                doc.line(70, 52, 6, 52);
                doc.line(70, 55, 6, 55);
                doc.line(53, 58, 53, 24);
                if (mmrr != "1") {
                    //doc.autoTable({ html: '#members_' });

                    var htmlstring = '';
                    var tempVarToCheckPageHeight = 0;
                    var pageHeight = 0;
                    pageHeight = doc.internal.pageSize.height;
                    specialElementHandlers = {
                        // element with id of "bypass" - jQuery style selector
                        '#bypassme': function (element, renderer) {
                            // true = "handled elsewhere, bypass text extraction"
                            return true
                        }
                    };


                    doc.autoTable({
                        html: '#members_',
                        startY: 60,
                        theme: 'plain',
                        tableWidth: 35,
                        headStyles: {
                            fontSize: 5,
                            lineWidth: 0.01,
                            lineColor: [0, 0, 0],
                            halign: 'center',
                            cellWidth: 'wrap',
                            fillColor: "#eee"
                        },

                        styles: {
                            font: 'Amiri',
                            fontSize: 4,
                            halign: 'center',
                            cellPadding: { top: 0.3, right: 1, bottom: 0.3, left: 1 },
                            /*overflow: 'linebreak',*/
                            lineWidth: 0.01,
                            lineColor: [0, 0, 0],
                            cellWidth: 'wrap'
                        }
                    });
                    doc.text(" :سلطة التخويل", 70, 97, { align: 'right', lang: 'ar' });
                    var barcode64 = textToBase64Barcode('@Model.BARCODE');
                    doc.addImage(barcode64, 'PNG', 5, 95, 20, 5);
                    doc.setFontSize(6);
                    doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 90, { align: 'right', lang: 'ar' });
                    //doc.setTextColor(0, 0, 255);
                    doc.text(zones, 70, 93, { align: 'right', lang: 'ar' });
                    doc.setFontSize(5);
                    //doc.setTextColor(255, 0, 0);
                }
                else {
                    doc.text(" :سلطة التخويل", 70, 90, { align: 'right', lang: 'ar' });
                    var barcode64 = textToBase64Barcode('@Model.BARCODE');
                    doc.addImage(barcode64, 'PNG', 5, 90, 20, 10);
                    doc.setFontSize(6);
                    doc.text(":المناطق والبوابات الأمنية المصرح بالدخول إليها", 70, 75, { align: 'right', lang: 'ar' });
                    //doc.setTextColor(0, 0, 255);
                    doc.text(zones, 70, 80, { align: 'right', lang: 'ar' });
                    doc.setFontSize(5);
                }
                if (force_id != "2") {
                    var sig = si;
                    doc.addImage(sig, 'JPEG', 58, 90, 13, 13);
                }

                var string = doc.output('datauristring');

                document.getElementById("frame").style.display = "block";
                $('#frame').attr('src', string);
            }




        }
        String.prototype.EntoAr = function () {
            return this.replace(/\d/g, d => String.fromCharCode('0x066' + d))
        }
    </script>


    <script src="@Url.Content("~/Scripts/JsBarcode.all.js")"></script>
    <script>

        $(function () {
            $(".barcode-image").each(function () {
                console.log($(this).data("imageid"));

                var imageid = "#" + $(this).data("imageid");
                var code = $(this).data("barcode");

                JsBarcode(imageid, code, {
                    format: "code39",
                    displayValue: false,
                    fontSize: 20,
                    height: 30,
                    width: 1,

                });

                $("#base-64-input").val($(this).attr("src"));


            });
        });



        function textToBase64Barcode(text) {
            var canvas = document.createElement("canvas");
            JsBarcode(canvas, text, { format: "CODE39", displayValue: false });
            return canvas.toDataURL("image/png");
        }

    </script>
}
